/*! luhui Zoom Earth @author Neave Interactive, neave.com @copyright 2020 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{127:function(e,t,i){i(128),function(e,t){Date.now=Date.now||function(){return(new Date).getTime()},e.URL=e.URL||e.webkitURL,e.requestAnimationFrame=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.msRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)},e.cancelAnimationFrame=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.mozCancelAnimationFrame||e.msCancelAnimationFrame||function(e){clearTimeout(e)},e.requestIdleCallback=e.requestIdleCallback||function(e){return setTimeout(e,10)},e.cancelIdleCallback=e.cancelIdleCallback||function(e){clearTimeout(e)},Math.sign=Math.sign||function(e){return(e>0)-(e<0)||+e},!HTMLCanvasElement.prototype.toBlob&&e.Uint8Array&&Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,i){for(var o=atob(this.toDataURL(t,i).split(",")[1]),a=o.length,s=new Uint8Array(a),n=0;n<a;n++)s[n]=o.charCodeAt(n);e(new Blob([s],{type:t||"image/png"}))}}),t.createElement("article"),t.createElement("aside"),t.createElement("header"),t.createElement("main"),t.createElement("nav"),t.createElement("section"),t.createElement("time")}(window,document)},148:function(e,t,i){"use strict";i.r(t);var o,a,s,n,r,l;i(127);o=window,a=document,s="script",n="ga",o.GoogleAnalyticsObject=n,o.ga=o.ga||function(){(o.ga.q=o.ga.q||[]).push(arguments)},o.ga.l=1*new Date,r=a.createElement(s),l=a.getElementsByTagName(s)[0],r.async=1,r.src="https://www.google-analytics.com/analytics.js",l.parentNode.insertBefore(r,l);var c="UA-56095-2";window["ga-disable-"+c]=!0,ga("set","anonymizeIp",!0),ga("create",c,"auto");var u=function(e){ga("set","page",e),ga("send","pageview")},h=function(e,t,i,o){ga("send","event",e,t,i,o)},m=function(e,t,i){t&&-1!==t.indexOf("timeout")||ga("send","event","Error",e,t,i)},d={localStorage:!1,passiveEvents:!1,blobType:!1,touch:!1};d.localStorage=function(e){try{return e.setItem("_","_"),e.removeItem("_"),!0}catch(e){return!1}}(window.localStorage);try{var p=Object.defineProperty({},"passive",{get:function(){d.passiveEvents=!0}});addEventListener("_",null,p),removeEventListener("_",null,p)}catch(e){}d.blobType=function(){if(!window.XMLHttpRequest)return!1;try{var e=new XMLHttpRequest;return e.responseType="blob",e.open("GET","/",!0),"response"in e&&"blob"===e.responseType}catch(e){return!1}}(),d.touch=window.matchMedia&&matchMedia("(any-hover: none)").matches||"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;var g=d,v=i(7),f=function(e){return!0===e||!1===e},b=function(e,t,i,o){return void 0===o&&(o=!1),e&&e.addEventListener(t,i,!!g.passiveEvents&&{passive:o})},y=function(e,t){return e&&e.querySelector(t)},w=function(e,t){return e&&e.querySelectorAll(t)},T=function(e,t){return Math.round(e*t)/t},S=function(e,t){return T(e,I(Math.pow(10,Math.floor(t-4)),10,1e6))},D=function(e,t,i){return T(e,i)===T(t,i)},L=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},C=function(e){return("0"+e).slice(-2)},I=v.a,k=v.d,x=v.c,U=function(e,t){if(e){var i=e.firstChild;i&&!i.nextSibling&&3===i.nodeType?i.data=t:e.textContent=t}},M=function(e){return"string"!=typeof e?"":e.charAt(0).toUpperCase()+e.slice(1)},E='<span class="loading"><span>·</span><span>·</span><span>·</span></span>',R=function(e){return parseInt(e,10)},A=function(e,t){var i=1;e<0&&(i=-1,e=-e);var o=Math.floor(e),a=Math.floor(60*(e-o)),s=T(3600*(e-o-a/60),t);return s>=60&&(s=0,a++),a>=60&&(a=0,o++),{sign:i,degrees:o,minutes:a,seconds:s}},Z=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],O=function(e,t){var i=new Date(e);return isNaN(i.getTime())||i.setTime(i.getTime()+36e5*t/15),i},z=function(e,t){var i=new Date(e);return isNaN(i.getTime())||i.setUTCDate(i.getUTCDate()+t),i},F=function(e){return z(e,-1)},j=function(e){return z(e,1)},P=function(e){var t=new Date(e);return isNaN(t.getTime())||t.setUTCHours(0,0,0,0),t},H=function(e){return e.setUTCHours(0,0,0,0),e},_=function(e){return e.toISOString().substr(0,10)},N=function(e,t,i,o,a,s){void 0===o&&(o="AM"),void 0===a&&(a="PM");var n=e.getUTCHours()%12;0===n&&(n=12);var r=e.getUTCMinutes(),l=n+(0===r?"":":"+C(r)),c=e.getUTCHours()<12?o:a;if("12"===l&&c==o)return t;if("12"===l&&c==a)return i;var u=/^ja|zh/.test(s)?c+l:l+" "+c;return/^ja/.test(s)?u+="時":/^zh/.test(s)&&(u+="点"),u},G=function(e){return e.toISOString().substr(11,5)},W=40,q=37,B=39,V=38,J=107,Y=109,$=61,K=173,X=187,Q=189,ee=67,te=68,ie=70,oe=73,ae=76,se=83,ne=84,re=86,le=88,ce=90,ue=20037508.342789244,he=Math.SQRT2-1,me=function(e){return e[0]%=2*ue,e[0]<-ue&&(e[0]+=2*ue),e[0]>ue&&(e[0]-=2*ue),e},de=function(e){var t=e%360;return t>=180&&(t-=360),t<=-180&&(t+=360),t},pe=function(e,t){var i=e[0],o=Math.pow(2,i),a=-1-e[2];return{x:t?k(e[1],o):e[1],y:a,z:i,size:o}},ge=i(19);function ve(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var fe={timeout:500},be={},ye=function(e,t){if(!g.localStorage)return t;var i=localStorage.getItem(e);return i||t},we=function(e,t,i){g.localStorage&&(i?localStorage.setItem(e,t):(cancelIdleCallback(be[e]),be[e]=requestIdleCallback((function(){return localStorage.setItem(e,t)}),fe)))},Te=function(e,t){if(!g.localStorage)return t;var i=localStorage.getItem(e);return"true"===i||"false"!==i&&t},Se=we,De=new(function(){function e(){var e=window._ZE||{};this.strings=e.strings||{},this.strings.dayJaZh="日",this.isMobile=!1,this.isiPad=!1,this.locale=function(e){switch(e){case"ar":return"ar-SA";case"de":return"de-DE";case"es":return"es-ES";case"fr":return"fr-FR";case"hi":return"hi-IN";case"it":return"it-IT";case"ja":return"ja-JP";case"nl":return"nl-BE";case"pl":return"pl-PL";case"pt-BR":return"pt-BR";case"ru":return"ru-RU";case"tr":return"tr-TR";case"zh-CN":return"zh-CN";default:return"en-US"}}(document.documentElement.lang),this.nonArabicLocale="ar-SA"===this.locale?"en-US":this.locale,this.isJaZh=/^ja|zh/.test(this.locale);var t=navigator.connection;this.isSlow=!!t&&(t.saveData||"2g"===t.effectiveType||"slow-2g"===t.effectiveType),this.pixelRatio=ge.b,this.use2x=this.pixelRatio>=1.3&&!this.isSlow,this.useWebP=!1;var i=!/^(US|GB)/.test(e.countryCode);this._showLabels=Te("showLabels",!1),this._showTerminator=Te("showTerminator",!0),this._showCrosshairs=Te("showCrosshairs",!1),this._showDecimalLocation=Te("showDecimalLocation",!1),this._showMetricUnits=Te("showMetricUnits",i),this._timeUTC=Te("timeUTC",!1),this._time24Hour=Te("time24Hour",!/^(US|CA)/.test(e.countryCode)),this._zoomToCenter=Te("zoomToCenter",!1),this._showClockHelp=Te("showClockHelp",!0),this._showZoomHelp=Te("showZoomHelp",void 0),this._stormWindUnits=ye("stormWindUnits",i?"kmh":"mph"),this._notifications=ye("notifications",""),this.isAM=!0,this.showLiveImages=!0,this.showDailyImages=!0,this.showEsriImages=!1,this.showStormTracks=!0,this.showFireSpots=!1,this.isSmallScreen=screen.availWidth<800,this.minZooms={all:this.isSmallScreen?2:3,storms:this.isSmallScreen?4:5,met:(this.isSmallScreen?4:5)+he,monthly:(this.isSmallScreen?8:9)+he,monthlyDates:12},this.maxZooms={all:22,bing:20,esri:20,geolocation:17,daily:8,blueMarble:9,goes:7,met:5,him8:7,labels:8},this.date=H(new Date);var o=new Date(Date.now()-9e5);if(this.liveTime=36e5*o.getUTCHours()+6e4*Math.floor(o.getUTCMinutes()/10)*10,this.liveTime<0){this.liveTime=k(this.liveTime,864e5),this.date.setTime(this.date.getTime()-864e5)}this.minLiveDate=new Date(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()-7,0,0,0,0),this.minLiveMidnight=this.minLiveDate.getTime(),this.maxLiveDate=o,this.minMonthlyTime=new Date(1990,0).getTime(),this.liveEnabled={goes17:!0,goes16:!0,met11:!0,met8:!0,him8:!0},this.liveTimes={goes17:[],goes16:[],met11:[],met8:[],him8:[]},this.isLiveTimesLoaded=!1,this.minDate=new Date(2e3,0,1),this.aquaDate=new Date(2002,6,4),this.viirsDate=new Date(2015,10,24),this.firesDate=new Date(2012,4,8),this.viirsDateString=_(this.viirsDate),this.viirsYesterdayDateString=_(F(this.viirsDate)),this.bingAerial=1,this.bingDynamic=1}var t,i,o;return t=e,(i=[{key:"isLiveDate",get:function(){return this.date.getTime()>=this.minLiveMidnight}},{key:"timeUTC",get:function(){return this._timeUTC},set:function(e){this._timeUTC!==e&&f(e)&&(this._timeUTC=e,Se("timeUTC",e))}},{key:"time24Hour",get:function(){return this._time24Hour},set:function(e){this._time24Hour!==e&&f(e)&&(this._time24Hour=e,Se("time24Hour",e))}},{key:"showLabels",get:function(){return this._showLabels},set:function(e){this._showLabels!==e&&f(e)&&(this._showLabels=e,Se("showLabels",e))}},{key:"showTerminator",get:function(){return this._showTerminator},set:function(e){this._showTerminator!==e&&f(e)&&(this._showTerminator=e,Se("showTerminator",e))}},{key:"showCrosshairs",get:function(){return this._showCrosshairs},set:function(e){this._showCrosshairs!==e&&f(e)&&(this._showCrosshairs=e,Se("showCrosshairs",e))}},{key:"showDecimalLocation",get:function(){return this._showDecimalLocation},set:function(e){this._showDecimalLocation!==e&&f(e)&&(this._showDecimalLocation=e,Se("showDecimalLocation",e))}},{key:"showMetricUnits",get:function(){return this._showMetricUnits},set:function(e){this._showMetricUnits!==e&&f(e)&&(this._showMetricUnits=e,Se("showMetricUnits",e))}},{key:"zoomToCenter",get:function(){return this._zoomToCenter},set:function(e){this._zoomToCenter!==e&&f(e)&&(this._zoomToCenter=e,Se("zoomToCenter",e))}},{key:"stormWindUnits",get:function(){return this._stormWindUnits},set:function(e){this._stormWindUnits!==e&&e&&(this._stormWindUnits=e,we("stormWindUnits",e))}},{key:"showClockHelp",get:function(){return this._showClockHelp},set:function(e){this._showClockHelp!==e&&f(e)&&(this._showClockHelp=e,Se("showClockHelp",e))}},{key:"showZoomHelp",get:function(){return this._showZoomHelp},set:function(e){this._showZoomHelp!==e&&f(e)&&(this._showZoomHelp=e,Se("showZoomHelp",e))}},{key:"notifications",get:function(){return this._notifications},set:function(e){this._notifications!==e&&e&&(this._notifications=e,we("notifications",e,!0))}}])&&ve(t.prototype,i),o&&ve(t,o),e}());function Le(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Ce=function(e){if(!navigator.standalone)try{history.replaceState({},null,e)}catch(t){location.replace(e)}},Ie=function(e){var t=[];e?De.showEsriImages&&t.push("esri"):(De.showLiveImages||De.showDailyImages||t.push("base"),De.showLiveImages&&!De.showDailyImages&&t.push(De.isLiveDate?"live":"base"),!De.showLiveImages&&De.showDailyImages&&t.push("daily")),De.showLabels&&t.push("labels"),!e&&De.showFireSpots&&t.push("fires"),De.showCrosshairs&&t.push("crosshairs");var i="";return t.length>0&&(i=t.join(",")),i},ke=new(function(){function e(){this.appName="Zoom Earth",this.paths={storms:"/storms/",places:"/places/"},this.query="",this.place={coords:[],zoom:null,path:null,title:null}}var t,i,o,a=e.prototype;return a.parse=function(){var e={coords:[],zoom:void 0,showEsriImages:void 0,showLabels:void 0,showLiveImages:!0,showDailyImages:!0,showFireSpots:void 0,showCrosshairs:void 0,date:void 0,isAM:void 0},t=location.hash.replace("#","");if(!t)return e;if(!/(view|date|layers)=/.test(t)&&t.length>8){var i=t.split(","),o=i[0],a=i[1],s="globe"===i[2],n=s?De.minZooms.all:i[2],r=i[s?3:5],l="am"===i[4]?"am":"pm",c=[];s||"map"!==i[3]||c.push("labels"),t="/view="+o+","+a+","+n+"/date="+r+","+l+"/layers="+c.join(",")}for(var u=t.split("/"),h=0,m=u.length;h<m;h++){var d=u[h].split("="),p=d[1]?d[1].split(","):[];switch(d[0]){case"view":var g=parseFloat(p[1])%360,v=parseFloat(p[0]);L(g)&&L(v)?(g<-180?g+=360:g>180&&(g-=360),v<-86?v=-86:v>86&&(v=86)):(g=0,v=0),e.coords=[g,v],e.zoom=parseFloat(p[2]),(!L(e.zoom)||e.zoom<De.minZooms.all)&&(e.zoom=De.minZooms.all),De.isSmallScreen&&e.zoom--;break;case"date":var f=H(new Date(p[0])),b=De.liveTime,y=p[1],w=parseFloat(p[2]);if("am"===y||"pm"===y)e.isAM="am"===y;else{var T=y?y.split(":"):[];if(2===T.length){var S=R(T[0]),D=R(T[1]);S>=0&&S<24&&D>=0&&D<60&&(b=36e5*S+6e4*D)}}var C=0;L(w)&&w>-24&&w<24&&(C=36e5*w),f.setTime(f.getTime()+b-C);var I=f.getTime();L(I)&&(I<De.minDate.getTime()?e.date=new Date(De.minDate.getTime()):I>De.maxLiveDate.getTime()?e.date=new Date(De.maxLiveDate.getTime()):e.date=f),void 0===e.isAM&&e.date.getTime()<Date.now()-864e5&&(e.isAM=!1);break;case"layers":for(var k=p.length;k--;)switch(p[k]){case"esri":e.showEsriImages=!0;break;case"labels":e.showLabels=!0;break;case"live":e.showLiveImages=!0,-1===p.indexOf("daily")&&(e.showDailyImages=!1);break;case"daily":e.showDailyImages=!0,-1===p.indexOf("live")&&(e.showLiveImages=!1);break;case"base":case"bluemarble":e.showLiveImages=!1,e.showDailyImages=!1;break;case"fires":e.showFireSpots=!0;break;case"crosshairs":e.showCrosshairs=!0}}}return e},a.update=function(e,t,i){if(e&&L(e[0])&&L(e[1])&&L(t)){if(t<De.minZooms.all+.5)return this.remove(),document.title=this.defaultTitle,void Ce("/"+this.query);var o=t>De.minZooms.monthly;De.isSmallScreen&&t++;var a=De.date.getUTCFullYear(),s=De.date.getUTCMonth(),n=De.date.getUTCDate(),r=De.liveTime/36e5,l=Math.floor(r),c=Math.round(60*(r-l)),h=i&&!De.timeUTC?1e3*new Date(De.date.getTime()+De.liveTime).getTimezoneOffset()*60:0,m=new Date(Date.UTC(a,s,n,l,c,0,0));m.setTime(m.getTime()-h);var d,p=m.getUTCFullYear()+"-"+C(m.getUTCMonth()+1)+"-"+C(m.getUTCDate()),g=C(m.getUTCHours())+":"+C(m.getUTCMinutes());this.place.title&&(d=this.place.title+" | "+this.appName),d||o||(d=p.replace(/\-/g,"/")+(i?" "+g+(De.timeUTC?" UTC":""):"")+" | "+this.appName);var v=e[0],f=e[1];if(!d){var b=o?100:10,y=T(Math.abs(v),b);try{y=y.toLocaleString(De.nonArabicLocale)}catch(e){}y+="°"+(v<0?De.strings.location.west:De.strings.location.east);var w=T(Math.abs(f),b);try{w=w.toLocaleString(De.nonArabicLocale)}catch(e){}d=(w+="°"+(f<0?De.strings.location.south:De.strings.location.north))+" "+y+" | "+this.appName}document.title=d||this.defaultTitle;var D=S(f,t)+","+S(v,t)+","+T(t,100)+"z",I="";if(!o){if(i){var k=h/-36e5;De.timeUTC||0===k||(g+=","+(k<0?"":"+")+k)}else p=_(De.date),g=De.isAM?"am":"pm";I="/date="+p+","+g}var x=Ie(o);x&&(x="/layers="+x),"/"!==location.pathname&&u("/"),Ce("/"+this.query+"#view="+D+I+x)}},a.updateStormTrack=function(e){if(e&&e.id){document.title=e.title?(e.isLive?e.title.replace(/\d{4}$/,De.strings.storm.liveTitle):e.title)+" | "+this.appName:this.defaultTitle;var t=Ie(!1);t&&(t="#layers="+t),location.pathname!==""+this.paths.storms+e.id+"/"&&u(""+this.paths.storms+e.id+"/"),Ce(""+this.paths.storms+e.id+"/"+this.query+t)}},a.updateStormSeason=function(){document.title=De.strings.storm.title+" | "+this.appName,location.pathname!==this.paths.storms&&u(this.paths.storms),Ce(this.paths.storms+this.query)},a.updatePlace=function(){if("/"===this.place.path)return!0;if(0===this.place.coords.length)return this.clearPlace(),!1;var e=this.place.title;e&&e.length>1&&(document.title=e+" | "+this.appName);var t=this.place.path;if(t&&t.length>2&&0===t.indexOf(this.paths.places)){location.pathname!==t&&u(t);var i="";return L(this.place.zoom)&&(i=Ie(this.place.zoom>De.minZooms.monthly))&&(i="#layers="+i),Ce(""+t+this.query+i),!0}return!1},a.clearPlace=function(){this.place.coords=[],this.place.zoom=null,this.place.path=null,this.place.title=null},a.remove=function(){if(!navigator.standalone&&location.hash.length>1)try{history.replaceState({},null,"/"+this.query)}catch(e){location.replace("/"+this.query+"#")}document.title=this.defaultTitle},t=e,(i=[{key:"defaultTitle",get:function(){return this.appName+" | "+De.strings.strapline}}])&&Le(t.prototype,i),o&&Le(t,o),e}()),xe=i(20),Ue=i.n(xe),Me=i(61),Ee=function(){function e(){this._listeners={}}var t=e.prototype;return t.addEventListener=function(e,t){var i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)},t.dispatchEvent=function(e){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var i=t.slice(0),o=0,a=i.length;o<a;o++)i[o].call(this,e)}},e}(),Re=i(9),Ae=i(104),Ze=i(100),Oe=i(81),ze=i(83),Fe=i(44),je=i(39),Pe=i(98),He=i(57),_e=i(99);function Ne(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Ge={"-2":"#6040ff","-1":"#09f",0:"#0f7",1:"#fc0",2:"#f90",3:"#f60",4:"#f30",5:"#f02"},We=function(){function e(e,t,i){this.trackSource=e,this.coneSource=t,this.dotSource=i,this.dates={},this.data={},this.trackFeatures={},this.coneFeatures={},this.dotFeatures={},this.lines={},this.dateDots={},this.selectedID=null,this.selectedIndex=null,this.focussedID=null,this.closestIndex=null;var o=document.createElement("div");o.className="overlay-storm",this.overlayText=document.createElement("span"),o.appendChild(this.overlayText);var a=document.createElement("span");a.className="anchor",o.appendChild(a),this.overlay=new Pe.a({element:o,className:"ol-overlay-storm",positioning:"bottom-center"}),this.dateDotShadow=new Ae.a({radius:11*De.pixelRatio,fill:new Ze.a({color:"rgba(0,0,0,0.1)"})}),this.dateDotShadow.setScale(1/De.pixelRatio)}var t,i,o,a=e.prototype;return a.showOverlay=function(e,t,i,o){U(this.overlayText,e),o>90&&i[0]<0?i[0]+=2*ue:o<-90&&i[0]>0&&(i[0]-=2*ue),this.overlay.setPosition(i),this.overlay.element.classList.add("show"),this.overlay.element.children[0].className="overlay-storm rank"+t},a.hideOverlay=function(){this.overlay.element.classList.remove("show")},a.loadDates=function(e,t,i,o,a){var s=this,n=[_(De.date)];if(!t){var r=Object(Re.i)([e[0],e[1]],"EPSG:3857","EPSG:4326")[0],l=Object(Re.i)([e[2],e[3]],"EPSG:3857","EPSG:4326")[0];r<=-180&&l<=-90&&n.push(_(j(De.date))),l>=180&&r>=90&&n.push(_(F(De.date)))}for(var c=0,u=[],h=function(e,t){var r=n[e];!i&&s.dates[r]?(u=u.concat(s.dates[r]),++c===t&&o&&o(u)):Ue.a.get("http://zoom.earth/data/storms/",{timeout:5e3,params:{date:r}}).then((function(e){return e.status<200||e.status>=400?Promise.reject(new Error(e.statusText)):e.data.error||!e.data.storms?Promise.reject(new Error(e.data.error||"")):(s.dates[r]=e.data.storms,u=u.concat(e.data.storms),void(++c===t&&o&&o(u)))})).catch((function(e){m("stormDates",e.message),a&&a()}))},d=0,p=n.length;d<p;d++)h(d,p)},a.getMaxStorm=function(e,t){var i=this.activePadding,o=256*Math.pow(2,e),a=-4,s=null;for(var n in this.dateDots){var r=this.dateDots[n],l=r.get("rank");if(l>a){var c=t(me(r.getGeometry().getCoordinates()));c&&(c[0]=k(c[0],o),c[0]>=i[1]&&c[0]<innerWidth-i[3]&&c[1]>=i[0]&&c[1]<innerHeight-i[2]&&(a=l,s=n))}}this.selectedID=s,this.focussedID=null;var u=this.selectedData||null;return{data:u,index:u?this.dateDots[u.id].get("index"):null}},a.deselect=function(){this.selectedID=null,this.selectedIndex=null,this.focussedID=null},a.update=function(e,t,i){if(De.showStormTracks&&e){var o=e.filter((function(t,i){return e.indexOf(t)===i})),a=Object.keys(this.trackFeatures),s=a.filter((function(e){return-1===o.indexOf(e)})),n=t?o:o.filter((function(e){return-1===a.indexOf(e)}));if(s.length>0){for(var r=s.length;r--;)this.remove(s[r]);i&&i()}if(n.length>0)for(var l=0,c=function(){l++,i&&l===n.length&&i()},u=n.length;u--;)this.load(n[u],t,c)}},a.getHash=function(e){return function(e){for(var t=0,i=0,o=e.length;i<o;i++)t=(t<<5)-t+e.charCodeAt(i)|0;return t}(JSON.stringify(e))},a.load=function(e,t,i){var o=this;if(t||!this.data[e]){var a={id:e},s=De.locale.substr(0,2);"en"!==s&&(a.lang=s),Ue.a.get("http://zoom.earth/data/storms/",{timeout:5e3,params:a}).then((function(a){if(a.status<200||a.status>=400)return Promise.reject(new Error(a.statusText));if(a.data.error||!a.data.track)return Promise.reject(new Error(a.data.error||"Error"));var s=o.getHash(a.data);if(t){if(o.trackFeatures[e]&&o.data[e]&&o.data[e].hash===s)return void i();h("UI","stormUpdate",e),o.remove(e),o.dates={}}o.data[e]=a.data,o.add(a.data,s,i)})).catch((function(e){m("stormTrack",e.message),i()}))}else this.add(this.data[e],this.data[e].hash,i)},a.remove=function(e){var t=this.trackFeatures[e],i=this.dotFeatures[e];if(t&&i){for(var o=t.length;o--;)this.trackSource.removeFeature(t[o]);var a=this.coneFeatures[e];if(a)for(var s=a.length;s--;)this.coneSource.removeFeature(a[s]);for(var n=i.length;n--;)this.dotSource.removeFeature(i[n]);this.selectedID===e&&this.deselect(),delete this.trackFeatures[e],delete this.coneFeatures[e],delete this.dotFeatures[e],delete this.lines[e],delete this.dateDots[e]}},a.add=function(e,t,i){if(De.showStormTracks&&e&&e.id&&e.track&&0!==e.track.length){e.hash=t||this.getHash(e);var o=e.track[e.track.length-1];if(o){var a=Date.parse(o.date);e.isLive=!isNaN(a)&&a>Date.now()-324e5}else e.isLive=!1;if(this.data[e.id]||(this.data[e.id]=e),this.trackFeatures[e.id])i&&i();else{var s=[],n=[],r=[],l=[];this.lines[e.id]=[];for(var c=0,u=e.track.length;c<u;c++){var h=e.track[c],m=me(Object(Re.d)(h.coordinates));if(l.push(m),c>0){var d=l[c-1];m[0]-d[0]>ue?d[0]+=2*ue:m[0]-d[0]<-ue&&(d[0]-=2*ue);var p=new Fe.a(new je.a([d,m]));p.setStyle(new Oe.c({stroke:new ze.a({color:Ge[e.track[c-1].rank],width:2.5,lineCap:"round",lineDashOffset:4}),zIndex:2})),s.push(p),this.lines[e.id].push(p)}var g=new Fe.a({id:e.id,index:c});g.setId("dot-"+c+"-"+e.id),g.setGeometry(new He.a(m));var v=new Ae.a({radius:4*De.pixelRatio,fill:new Ze.a({color:Ge[h.rank]})});v.setScale(1/De.pixelRatio),g.setStyle(new Oe.c({image:v,zIndex:3})),s.push(g)}if(e.cone){var f=new Fe.a(new _e.a([[e.cone],[e.cone.map((function(e){return[e[0]+360,e[1]]}))]]).transform("EPSG:4326","EPSG:3857"));f.setStyle(new Oe.c({fill:new Ze.a({color:"#fff"}),stroke:new ze.a({color:"#666",width:1})})),n.push(f),this.coneSource.addFeatures(n),this.coneFeatures[e.id]=n}var b=new Fe.a({id:e.id,index:0});b.setId("dot-date-"+e.id);var y=new Ae.a({radius:8.5*De.pixelRatio,fill:new Ze.a({color:"#fff"}),stroke:new ze.a({color:"#fff",width:2.5*De.pixelRatio})});y.setScale(1/De.pixelRatio),b.setStyle([new Oe.c({image:this.dateDotShadow,zIndex:3}),new Oe.c({image:y,zIndex:3})]),r.push(b),this.dateDots[e.id]=b,this.trackSource.addFeatures(s),this.trackFeatures[e.id]=s,this.dotSource.addFeatures(r),this.dotFeatures[e.id]=r,i&&i()}}},a.getClosestIndexForDate=function(e,t){for(var i=t.getTime(),o=1/0,a=0,s=0,n=e.length;s<n;s++){var r=e[s];if(r){var l=Date.parse(r.date),c=Math.abs(l-i);c<o&&(o=c,a=s)}}return a},a.getCoordsForDate=function(e,t){var i=t.getTime(),o=this.getClosestIndexForDate(e,t),a=e[o],s=Date.parse(a.date),n=Math.sign(i-s),r=e[o+n]||a,l=Date.parse(r.date);if(l===s)return a.coordinates;var c=(i-Math.min(s,l))/Math.abs(s-l),u=de(a.coordinates[0]),h=de(r.coordinates[0]);u<-150&&h>150?u+=360:u>150&&h<-150&&(h+=360);var m=de(x(n<0?h:u,n<0?u:h,c)),d=a.coordinates[1],p=r.coordinates[1];return[m,x(n<0?p:d,n<0?d:p,c)]},a.updateDateDot=function(e,t,i){var o=this.dateDots[e],a=this.data[e];if(o&&a){var s=new Date(De.date.getTime()+De.liveTime);i||s.setUTCHours(De.isAM?10:13,30,0,0);var n,r=0;if(this.selectedID===e&&null!==this.selectedIndex)r=this.selectedIndex;else for(var l=1/0,c=0,u=a.track.length;c<u;c++){var h=a.track[c],m=de(h.coordinates[0]),d=i?new Date(h.date):O(h.date,m);if(!isNaN(d.getTime())){i||(t>=75||t<-75)&&(m>=25&&t<25?d.setUTCDate(d.getUTCDate()-1):m<25&&t>=25&&d.setUTCDate(d.getUTCDate()+1));var p=s.getTime()-d.getTime();i?p>=0&&p<l&&(l=p,r=c):(p=Math.abs(p))<l&&(l=p,r=c)}}if(n=a.track[r]){var g=me(Object(Re.d)(i&&null===this.selectedIndex?this.getCoordsForDate(a.track,s):n.coordinates));o.setGeometry(new He.a(g));var v=o.getStyle()[1].getImage(),f=n.forecast?"rgba(255,255,255,0.5)":Ge[n.rank];return v.getFill().getColor()!==f&&(v.getFill().setColor(f),v.setRadius(v.getRadius())),o.set("rank",n.rank),o.set("index",r),this.selectedID===e&&(this.closestIndex=r),g}}},a.loadDetails=function(e,t){Ue.a.get("http://zoom.earth/data/storms/",{timeout:5e3,params:{details:e}}).then((function(e){return e.status<200||e.status>=400?Promise.reject(new Error(e.statusText)):e.data.error||!e.data.details?Promise.reject(new Error(e.data.error||"Error")):void t(e.data)})).catch((function(){t()}))},t=e,(i=[{key:"activePadding",get:function(){return window.innerWidth<512||window.innerHeight<480?[100,20,100,20]:[80,340,80,340]}},{key:"selectedData",get:function(){return this.data[this.selectedID]}},{key:"extent",get:function(){var e=this.selectedData;if(!e)return[];for(var t=[],i=0,o=e.track.length;i<o;i++){var a=e.track[i];t.push(Object(Re.d)(a.coordinates))}return new je.a(t).getExtent()}}])&&Ne(t.prototype,i),o&&Ne(t,o),e}(),qe=180/Math.PI,Be=Math.sqrt,Ve=Math.sin,Je=Math.cos,Ye=(Math.tan,Math.asin,Math.atan2),$e=function(e){return e*qe},Ke=function(e){return e/qe},Xe=function(e){return(e%360+360)%360},Qe=function(e,t){return Be(e*e+t*t)},et=function(e){var t=it(e);return Ke(23.4392911111+((.001813*t-59e-5)*t-46.815)*t/3600)},tt=function(e,t,i){return void 0===i&&(i=0),Xe($e(Ye(t,e))+i)},it=function(e){return(e-2451545)/36525},ot=280.46061837,at=function(e){var t=e-2451545;return Xe(function(e){var t=it(e);return ot+360.98564736629*(e-2451545)+387933e-9*t*t-t*t*t/3871e4}(e)+Je(et(e))*(-.004785*Ve(Ke(125.04452-.052954*t))-36e-5*Ve(Ke(2*(ot+.98564736629*t)))))},st=function(){function e(){this.ra=0,this.dec=0}return e.prototype.compute=function(e){var t=e-2451543.5,i=.016709-1.151e-9*t,o=Ke(Xe(356.047+.9856002585*t)),a=o+i*Ve(o)*(1+i*Je(o)),s=Je(a)-i,n=Be(1-function(e){return e*e}(i))*Ve(a),r=Qe(s,n),l=Ke(tt(s,n,282.9404+470935e-10*t)),c=r*Je(l),u=r*Ve(l),h=et(e),m=u*Je(h),d=u*Ve(h);this.ra=tt(c,m),this.dec=function(e,t,i){return $e(Ye(i,Qe(e,t)))}(c,m,d)},e}(),nt=function(){function e(e){this.source=e,this.coords=new Array(361),this.feature=null,this.date=new Date,this.sun=new st}return e.prototype.update=function(e){isNaN(e)||this.date.setTime(e);var t=this.date.getTime()/864e5+2440587.5;this.sun.compute(t);var i=at(t)-this.sun.ra,o=Math.tan(Ke(this.sun.dec));this.feature&&this.source.removeFeature(this.feature);for(var a=0;a<361;a++){var s=a-180;this.coords[a]=[s,$e(Math.atan(-Math.cos(Ke(i+s))/o))]}this.feature=new Fe.a(new je.a(this.coords).transform("EPSG:4326","EPSG:3857")),this.source.addFeature(this.feature)},e}(),rt=i(101),lt=i.n(rt),ct=i(115),ut=i(30),ht=lt.a.Geodesic.WGS84,mt=function(e){var t=[];return e.clone().transform("EPSG:3857","EPSG:4326").forEachSegment((function(e,i){for(var o=ht.InverseLine(e[1],e[0],i[1],i[0]),a=Math.ceil(o.s13/1e4),s=0;s<=a;s++){var n=Math.min(1e4*s,o.s13),r=o.Position(n,lt.a.Geodesic.LONG_UNROLL);t.push([r.lon2,r.lat2])}})),new ct.a([t]).transform("EPSG:4326","EPSG:3857")},dt=function(e,t){void 0===t&&(t=1);var i=e/t;return T(i,i<100?100:i<1e3?10:i<1e4?1:i<1e5?.1:i<1e6?.01:.001).toLocaleString()},pt=function(e,t){var i=function(e){var t=0;return e.forEachSegment((function(e,i){var o=ht.Inverse(e[1],e[0],i[1],i[0]);t+=o.s12})),t}(e.clone().transform("EPSG:3857","EPSG:4326"));if(t)return i>=1e3?dt(i,1e3)+" km":dt(i)+" m";var o=3.28084*i;return o>=5280?dt(o,5280)+" mi":dt(o)+" ft"},gt=function(e,t){var i=function(e){var t=e.getCoordinates()[0];if(t.length<3)return 0;var i=ht.Polygon(!1);t.forEach((function(e){return i.AddPoint(e[1],e[0])}));var o=i.Compute(!1,!0).area;return Math.abs(o)}(e.clone().transform("EPSG:3857","EPSG:4326"));if(t)return i>=1e5?dt(i,1e6)+" km<sup>2</sup>":dt(i)+" m<sup>2</sup>";var o=10.76391*i;return o>=3484800?dt(o,27878400)+" mi<sup>2</sup>":dt(o)+" ft<sup>2</sup>"},vt=i(84);var ft=function(e){var t=e.getGeometry();return t instanceof je.a?mt(t):t instanceof ut.a?function(e){for(var t=[],i=e.clone().transform("EPSG:3857","EPSG:4326").getCoordinates()[0],o=i.length-1,a=0;a<o;a++)for(var s=ht.InverseLine(i[a][1],i[a][0],i[a+1][1],i[a+1][0]),n=Math.ceil(s.s13/1e4),r=0;r<=n;r++){var l=Math.min(1e4*r,s.s13),c=s.Position(l,lt.a.Geodesic.LONG_UNROLL);t.push([c.lon2,c.lat2])}return new ut.a([t]).transform("EPSG:4326","EPSG:3857")}(t):t},bt=new Ae.a({radius:6*De.pixelRatio,fill:new Ze.a({color:"#fff"}),stroke:new ze.a({color:"#000",width:2*De.pixelRatio})});bt.setScale(1/De.pixelRatio);var yt=new Ze.a({color:"rgba(255,255,255,0.2)"}),wt=new ze.a({color:"#000",lineJoin:"round",width:5}),Tt=[new Oe.c({fill:yt,stroke:wt,geometry:ft}),new Oe.c({stroke:new ze.a({color:"#fff",width:2.5,lineJoin:"round",lineCap:"butt",lineDash:[8,10]}),image:bt,geometry:ft})],St=[new Oe.c({fill:yt,stroke:wt,geometry:ft}),new Oe.c({stroke:new ze.a({color:"#fff",width:2.5,lineJoin:"round"}),geometry:ft})],Dt=function(e){var t,i;function o(t){var i=e.call(this)||this;return i.layer=t,i.layer.setStyle(St),i.type=null,i.draw=null,i.drawListener=null,i.overlay=null,i.features={},i.overlays={},i.isActive=!1,i}i=e,(t=o).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var a=o.prototype;return a.start=function(e){var t=this;this.type=e,this.isActive=!0;var i=document.createElement("div");i.className="overlay-measure";var o=document.createElement("span");i.appendChild(o),this.overlay=new Pe.a({element:i,className:"ol-overlay-measure",positioning:"bottom-center",offset:[0,12.5]}),b(i,"click",(function(){return t.dispatchEvent({type:"units"})})),this.draw=new vt.a({source:this.layer.getSource(),snapTolerance:g.touch?20:12,type:"area"===this.type?"Polygon":"LineString",style:Tt}),this.draw.on("drawstart",(function(e){t.drawListener=e.feature.getGeometry().on("change",(function(e){var o,a=e.target;a instanceof je.a&&(o=mt(a).getFlatMidpoints()),a instanceof ut.a&&(o=a.getInteriorPoint().getCoordinates()),t.updateOverlay(a,i),t.overlay.setPosition(o),i.classList.add("active")}))})),this.draw.on("drawend",(function(e){var i=e.feature.getGeometry();t.features[i.ol_uid]=e.feature,t.overlays[i.ol_uid]=t.overlay.getElement(),t.end(i.ol_uid)})),this.dispatchEvent({type:"start",measure:this.type})},a.end=function(e){var t=this;Object(Me.b)(this.drawListener),this.drawListener=null;var i=this.overlay.getElement();if(i.classList.remove("active"),e){var o=document.createElement("button");o.className="remove";var a=document.createElement("span");o.appendChild(a),i.appendChild(o),b(o,"click",(function(i){i.stopPropagation(),t.remove(e)}))}this.dispatchEvent({type:"end",measure:this.type}),setTimeout((function(){t.isActive=!1,t.draw=null}),300)},a.cancel=function(){this.isActive&&(this.dispatchEvent({type:"cancel",measure:this.type}),this.end())},a.remove=function(e){var t=this.features[e];t&&(this.layer.getSource().removeFeature(t),delete this.features[e]);var i=this.overlays[e];i&&(i.parentNode.removeChild(i),delete this.overlays[e])},a.updateOverlay=function(e,t){e instanceof je.a?U(t.children[0],pt(e,De.showMetricUnits)):e instanceof ut.a&&(t.children[0].innerHTML=gt(e,De.showMetricUnits))},a.updateUnits=function(){for(var e in this.overlays){var t=this.features[e].getGeometry();this.updateOverlay(t,this.overlays[e]),t.changed()}},o}(Ee),Lt=i(5);var Ct="x-ve-tilemeta-capturedatesrange",It=function(e){var t,i;function o(t){var i=e.call(this)||this;return i.source=t,i.dates=[],i}i=e,(t=o).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var a=o.prototype;return a.getSourceURL=function(e,t){if(e){var i=function(e){for(var t,i=pe(e,!0),o=i.x,a=i.y,s=i.z,n=new Array(s),r=1<<s-1,l=0;l<s;l++)t=48,o&r&&(t+=1),a&r&&(t+=2),n[l]=String.fromCharCode(t),r>>=1;return n.join("")}(e),o="a"===t?"":"&dpi=d1&device=mobile&mkt="+De.locale;return"h"===t&&/ar-SA|ja-JP|pt-BR|ru-RU|tr-TR|zh-CN/.test(De.locale)?"https://t.ssl.ak.dynamic.tiles.virtualearth.net/comp/ch/"+i+"?it=A,G,L&og="+De.bingDynamic+o:"https://t.ssl.ak.tiles.virtualearth.net/tiles/"+t+i+"?g="+De.bingAerial+o}},a.loadTile=function(e,t,i){var o=this,a=e.getImage();Ue.a.get(t,{responseType:g.blobType?"blob":void 0,timeout:5e3*(De.isSlow?2:1)}).then((function(s){if(i){if(1033===s.data.size||1033===R(s.headers["content-length"]))return void e.setState(Lt.a.ERROR)}else{var n=g.blobType?-1:s.data&&s.data.indexOf("PNG");if(n>-1&&n<3||"image/png"===s.data.type)return void e.setState(Lt.a.ERROR);var r=s.headers[Ct];if(r){var l=pe(e.getTileCoord(),!0),c=l.x,u=l.y,h=l.z;o.setDate(c,u,h,r)}}a.src=t})).catch((function(){i?e.setState(Lt.a.ERROR):a.src=t}))},a.getDate=function(e,t,i){var o=this.dates[i];if(o)return o[t+"~"+e]},a.setDate=function(e,t,i,o){if(o){var a=o.split(",")[0].split("-");if(2===a.length){var s=a[0].split("/"),n=a[1].split("/");if(!(s.length<3||n.length<3)){var r=new Date(Date.UTC(s[2],R(s[0])-1,s[1])).getTime();if(!isNaN(r)){var l=new Date(Date.UTC(n[2],R(n[0])-1,n[1])).getTime();if(!isNaN(l)){if(r>l){var c=[l,r];r=c[0],l=c[1]}r<De.minMonthlyTime||l<De.minMonthlyTime||l>Date.now()||(R(s[2])<2e3&&(r=l),this.dates[i]||(this.dates[i]={}),this.dates[i][t+"~"+e]=[r,l])}}}}}},a.update=function(e,t){var i=this;if(t<=De.minZooms.monthlyDates)this.dispatchEvent({type:"update"});else{var o=this.source.getTileGrid().getTileCoordForCoordAndZ(e,t),a=pe(o,!0),s=a.x,n=a.y,r=a.z,l=this.getDate(s,n,r);l?this.dispatchEvent({type:"update",min:l[0],max:l[1]}):Ue.a.head(this.getSourceURL(o,"a"),{timeout:5e3}).then((function(o){var a=o.headers[Ct];a&&i.setDate(s,n,r,a);var l=i.getDate(s,n,r);l?i.dispatchEvent({type:"update",min:l[0],max:l[1]}):t>De.minZooms.monthlyDates?i.update(e,t-1):i.dispatchEvent({type:"update"})})).catch((function(){}))}},o}(Ee);function kt(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var xt=function(e){var t,i;function o(t){var i=e.call(this)||this;return i.source=t,i.source.setUrls(i.sourceURLs),i.cache={},i.attribution="",i.cancelSource=Ue.a.CancelToken.source(),i.updateTime=0,i.updateTimeoutID=0,i}i=e,(t=o).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var a,s,n,r=o.prototype;return r.loadTile=function(e,t){var i=e.getImage();Ue.a.get(t,{responseType:g.blobType?"blob":void 0,timeout:5e3*(De.isSlow?2:1)}).then((function(o){2521!==o.data.size&&2521!==R(o.headers["content-length"])?i.src=t:e.setState(Lt.a.ERROR)})).catch((function(){i.src=t}))},r.getCache=function(e,t,i){if(this.cache[i])return this.cache[i][t+"~"+e]},r.setCache=function(e,t,i,o,a){this.cache[i]||(this.cache[i]={}),this.cache[i][t+"~"+e]={time:o,attribution:a}},r.update=function(e,t,i){var o=this;if(t<=De.minZooms.monthlyDates)return this.attribution="",void this.dispatchEvent({type:"update"});var a=Math.pow(2,17)/ue,s=Math.round(Math.floor(e[0]*a)/a),n=Math.round(Math.floor(e[1]*a)/a),r=this.getCache(s,n,t);if(r)return this.attribution=r.attribution,void this.dispatchEvent({type:"update",time:r.time});var l=Date.now()-this.updateTime;if(l<i)return clearTimeout(this.updateTimeoutID),void(this.updateTimeoutID=setTimeout((function(){return o.update(e,t,i)}),i-l));this.cancelSource.cancel(),this.cancelSource=Ue.a.CancelToken.source(),this.updateTime=Date.now(),Ue.a.get("https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/4/query",{cancelToken:this.cancelSource.token,timeout:5e3*(De.isSlow?2:1),params:{f:"json",where:"1=1",outFields:"SRC_DATE2,NICE_DESC,MinMapLevel,MaxMapLevel",geometry:{spatialReference:{latestWkid:3857,wkid:102100},x:s,y:n},geometryType:"esriGeometryPoint",spatialRel:"esriSpatialRelIntersects",returnGeometry:!1}}).then((function(e){if(e.status<200||e.status>=400)return Promise.reject();if(!e.data||!e.data.features)return Promise.reject();for(var i,a=Math.ceil(De.minZooms.monthly),r=e.data.features.length;r--;){var l=e.data.features[r].attributes;if(l){var c=l.MinMapLevel,u=l.MaxMapLevel;if(L(c)&&L(u)){for(var h=c;h<=u;h++)o.setCache(s,n,h,h<c?null:l.SRC_DATE2,l.NICE_DESC);u>a&&(a=u,i=l)}}}if(i)for(var m=a+1;m<=De.maxZooms.esri;m++)o.setCache(s,n,m,i.SRC_DATE2,i.NICE_DESC);var d=o.getCache(s,n,t);d?(o.attribution=d.attribution,o.dispatchEvent({type:"update",time:d.time})):o.dispatchEvent({type:"update",time:null})})).catch((function(){}))},a=o,(s=[{key:"sourceURLs",get:function(){var e="https://{}.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}";return[e.replace("{}","services"),e.replace("{}","server")]}}])&&kt(a.prototype,s),n&&kt(a,n),o}(Ee),Ut=i(0),Mt=i(117),Et=i(85),Rt=i(96),At=i(69),Zt=i(26),Ot=i(103),zt=i(34),Ft=i(116),jt=i(102),Pt=i(32),Ht=i(62),_t=i(63),Nt=i(97),Gt=i(31);function Wt(){return(Wt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e}).apply(this,arguments)}function qt(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Bt="https://tiles.zoom.earth/",Vt={goes17:-135,goes16:-16.875,met11:36.5625,met8:90,him8:180},Jt=function(e,t,i,o){return Object(Re.j)([e,i,t,o],"EPSG:4326","EPSG:3857")},Yt={goes17:Jt(-180,Vt.goes17+5.625,-62.91523303947613,62.91523303947613),goes17Wrap:Jt(180,Vt.goes17+360,-62.91523303947613,62.91523303947613),goes16:Jt(Vt.goes17,Vt.goes16+5.625,-62.91523303947613,62.91523303947613),met11:Jt(Vt.goes16,Vt.met11+2.8125,-62.91523303947613,62.91523303947613),met8:Jt(Vt.met11-2.8125,Vt.met8,-62.91523303947613,62.91523303947613),metAll:Jt(Vt.goes16,Vt.met8,-62.91523303947613,62.91523303947613),him8:Jt(Vt.met8-5.625,185.625,-62.91523303947613,62.91523303947613),him8Wrap:Jt(-270,-174.375,-62.91523303947613,62.91523303947613),top:Jt(-270,225,62.91523303947613,90),bottom:Jt(-270,225,-62.91523303947613,-90),terminator:Jt(-270,225,-62.91523303947613,62.91523303947613)},$t={goes17:Jt(-177.1875,Vt.goes17+2.8125,-62.91523303947613,62.91523303947613),goes16:Jt(Vt.goes17+2.8125,Vt.goes16+2.8125,-62.91523303947613,62.91523303947613),met11:Jt(Vt.goes16+2.8125,Vt.met11,-62.91523303947613,62.91523303947613),met8:Jt(Vt.met11,Vt.met8-2.8125,-62.91523303947613,62.91523303947613),metAll:Jt(Vt.goes16+2.8125,Vt.met8-2.8125,-62.91523303947613,62.91523303947613),him8:Jt(Vt.met8-2.8125,180,-62.91523303947613,62.91523303947613),him8Wrap:Jt(-180,-177.1875,-62.91523303947613,62.91523303947613)},Kt=Jt(-900,900,-90,90),Xt=Jt(-125,-59.5,24.5,49),Qt=function(e){var t,i;function o(t,i){var o,a=e.call(this)||this;o=t&&L(t[0])&&L(t[1])?Object(Re.d)(t):Object(Re.d)([-30,10]),a.view=new Nt.a({center:o,enableRotation:!1,extent:[-1/0,-At.a,1/0,At.a],zoom:i||De.minZooms.all,minZoom:De.minZooms.all,maxZoom:De.maxZooms.all}),a.geoDot=new Fe.a,a.geoDot.setId("dot-geo");var s=new Ae.a({radius:8.5*De.pixelRatio,fill:new Ze.a({color:"#3cf"}),stroke:new ze.a({color:"#fff",width:2.5*De.pixelRatio})});s.setScale(1/De.pixelRatio),a.geoDot.setStyle(new Oe.c({image:s})),a.geoAccuracy=new Fe.a,a.geoAccuracy.setStyle(new Oe.c({fill:new Ze.a({color:"transparent"})})),a.geoRenderID=null,HTMLCanvasElement.prototype.toBlob&&(a.liveCanvas=document.createElement("canvas"),a.liveCanvas.width=256,a.liveCanvas.height=256,a.liveContext=a.liveCanvas.getContext("2d"),a.compositeCanvas=document.createElement("canvas"),a.compositeCanvas.width=256,a.compositeCanvas.height=256,a.compositeContext=a.compositeCanvas.getContext("2d"),a.blackCanvas=document.createElement("canvas"),a.blackCanvas.width=32,a.blackCanvas.height=32,a.blackContext=a.blackCanvas.getContext("2d"),a.blueMarbleCanvas=document.createElement("canvas"),a.blueMarbleCanvas.width=256,a.blueMarbleCanvas.height=256,a.blueMarbleContext=a.blueMarbleCanvas.getContext("2d"),a.labelCanvas=document.createElement("canvas"),a.labelCanvas.width=De.use2x?512:256,a.labelCanvas.height=De.use2x?512:256,a.labelContext=a.labelCanvas.getContext("2d")),a.useBingLabels=!g.blobType,a.dailyCancelSource=Ue.a.CancelToken.source(),a.dailySourceTime=De.date.getTime(),a.monthlyResolution=a.view.getResolutionForZoom(De.minZooms.monthly);var n=a.view.getResolutionForZoom(De.minZooms.met),r=De.isMobile||De.isiPad,l={crossOrigin:"anonymous",cacheSize:De.isMobile||De.isiPad?256:4096,tileSize:De.use2x?128:256,tilePixelRatio:De.use2x?2:1};return a.layers={live:{goes17:new Pt.a({source:new Gt.a(Wt({minZoom:0,maxZoom:De.maxZooms.goes,transition:0,tileLoadFunction:function(e,t){return a.loadLiveTile(e,t,"goes17")}},l)),extent:Yt.goes17,minResolution:a.monthlyResolution,preload:1/0,useInterimTilesOnError:!0}),goes17Wrap:new Pt.a({source:new Gt.a(Wt({minZoom:0,maxZoom:De.maxZooms.goes,transition:0,tileLoadFunction:function(e,t){return a.loadLiveTile(e,t,"goes17")}},l)),extent:Yt.goes17Wrap,minResolution:a.monthlyResolution,preload:1/0,useInterimTilesOnError:!0}),goes16:new Pt.a({source:new Gt.a(Wt({minZoom:0,maxZoom:De.maxZooms.goes,transition:0,tileLoadFunction:function(e,t){return a.loadLiveTile(e,t,"goes16")}},l)),extent:Yt.goes16,minResolution:a.monthlyResolution,preload:1/0,useInterimTilesOnError:!0}),met11:new Pt.a({source:new Gt.a(Wt({minZoom:0,maxZoom:De.maxZooms.met,transition:0,tileLoadFunction:function(e,t){return a.loadLiveTile(e,t,"met11")}},l)),extent:Yt.met11,minResolution:n,preload:1/0,useInterimTilesOnError:!0}),met8:new Pt.a({source:new Gt.a(Wt({minZoom:0,maxZoom:De.maxZooms.met,transition:0,tileLoadFunction:function(e,t){return a.loadLiveTile(e,t,"met8")}},l)),extent:Yt.met8,minResolution:n,preload:1/0,useInterimTilesOnError:!0}),metFallback:new Pt.a({source:new Gt.a(Wt({minZoom:De.maxZooms.met,maxZoom:De.maxZooms.blueMarble,transition:150,tileLoadFunction:function(e,t){return a.loadDailyTile(e,t)}},l)),extent:Yt.metAll,maxResolution:n,minResolution:a.monthlyResolution,preload:1/0,useInterimTilesOnError:!0}),him8:new Pt.a({source:new Gt.a(Wt({minZoom:0,maxZoom:De.maxZooms.him8,transition:0,tileLoadFunction:function(e,t){return a.loadLiveTile(e,t,"him8")}},l)),extent:Yt.him8,minResolution:a.monthlyResolution,preload:1/0,useInterimTilesOnError:!0}),him8Wrap:new Pt.a({source:new Gt.a(Wt({minZoom:0,maxZoom:De.maxZooms.him8,transition:0,tileLoadFunction:function(e,t){return a.loadLiveTile(e,t,"him8")}},l)),extent:Yt.him8Wrap,minResolution:a.monthlyResolution,preload:1/0,useInterimTilesOnError:!0}),top:new Pt.a({source:new Gt.a(Wt({minZoom:0,maxZoom:De.maxZooms.blueMarble,transition:150,tileLoadFunction:function(e,t){return a.loadDailyTile(e,t,"top")}},l)),extent:Yt.top,minResolution:a.monthlyResolution,preload:1/0,useInterimTilesOnError:!0}),bottom:new Pt.a({source:new Gt.a(Wt({minZoom:0,maxZoom:De.maxZooms.blueMarble,transition:150,tileLoadFunction:function(e,t){return a.loadDailyTile(e,t,"bottom")}},l)),extent:Yt.bottom,minResolution:a.monthlyResolution,preload:1/0,useInterimTilesOnError:!0}),terminator:new Ht.a({source:new _t.a,style:[new Oe.c({stroke:new ze.a({color:"rgba(255,255,255,0.328125)",width:2,lineCap:"butt"})})],renderMode:"image",extent:Yt.terminator,minResolution:a.monthlyResolution,updateWhileAnimating:r,updateWhileInteracting:r})},daily:new Pt.a({source:new Gt.a(Wt({minZoom:0,maxZoom:De.maxZooms.daily,transition:150,tileLoadFunction:function(e,t){return a.loadDailyTile(e,t)}},l)),extent:Kt,minResolution:a.monthlyResolution,preload:1/0,useInterimTilesOnError:!0}),blueMarble:new Pt.a({source:new Gt.a(Wt({minZoom:0,maxZoom:De.maxZooms.blueMarble,transition:150},l)),minResolution:a.monthlyResolution,preload:1/0,useInterimTilesOnError:!0}),labels:new Pt.a({source:new Gt.a(Wt({minZoom:0,maxZoom:De.maxZooms.labels,transition:0,opaque:!1},l,{tileSize:256})),minResolution:a.monthlyResolution,preload:0,useInterimTilesOnError:!1,zIndex:1}),bingLabels:new Pt.a({source:new Gt.a(Wt({minZoom:De.minZooms.all,maxZoom:De.maxZooms.bing-1,transition:0,opaque:!1,tileUrlFunction:function(e){return a.bing.getSourceURL(e,"ho")},tileLoadFunction:function(e,t){return a.bing.loadTile(e,t,!0)}},l)),maxResolution:a.useBingLabels?void 0:a.monthlyResolution,preload:0,useInterimTilesOnError:!1,zIndex:1}),bingHybrid:new Pt.a({source:new Gt.a(Wt({minZoom:Math.ceil(De.minZooms.monthly),maxZoom:De.maxZooms.bing,transition:150,tileUrlFunction:function(e){return a.bing.getSourceURL(e,"h")},tileLoadFunction:function(e,t){return a.bing.loadTile(e,t)}},l)),maxResolution:a.monthlyResolution,preload:1/0,useInterimTilesOnError:!0}),bing:new Pt.a({source:new Gt.a(Wt({minZoom:Math.ceil(De.minZooms.monthly),maxZoom:De.maxZooms.bing,transition:150,tileUrlFunction:function(e){return a.bing.getSourceURL(e,"a")},tileLoadFunction:function(e,t){return a.bing.loadTile(e,t)}},l)),maxResolution:a.monthlyResolution,preload:1/0,useInterimTilesOnError:!0}),esri:new Pt.a({source:new Gt.a(Wt({minZoom:Math.ceil(De.minZooms.monthly),maxZoom:De.maxZooms.esri,transition:150,tileLoadFunction:function(e,t){return a.esri.loadTile(e,t)}},l)),maxResolution:a.monthlyResolution,preload:1/0,useInterimTilesOnError:!0}),fires:new Pt.a({source:new Gt.a({crossOrigin:"anonymous",transition:0,opaque:!1,cacheSize:De.isMobile||De.isiPad?256:4096,tileSize:256,tileUrlFunction:function(e){return a.getFiresSourceURL(e)},tileLoadFunction:function(e,t){return a.loadFiresTile(e,t)}}),extent:Kt,minResolution:a.monthlyResolution,preload:0,useInterimTilesOnError:!1}),stormTracks:new Ht.a({source:new _t.a,maxResolution:De.isSmallScreen?a.view.getResolutionForZoom(De.minZooms.storms-.01):void 0,minResolution:a.monthlyResolution,updateWhileAnimating:r,updateWhileInteracting:r,zIndex:2}),stormCones:new Ht.a({source:new _t.a,maxResolution:De.isSmallScreen?a.view.getResolutionForZoom(De.minZooms.storms-.01):void 0,minResolution:a.monthlyResolution,updateWhileAnimating:!1,updateWhileInteracting:!1,opacity:.328125,zIndex:1}),stormDots:new Ht.a({source:new _t.a,minResolution:a.monthlyResolution,updateWhileAnimating:r,updateWhileInteracting:r,zIndex:3}),geoDot:new Ht.a({source:new _t.a({features:[a.geoAccuracy,a.geoDot],wrapX:!1}),updateWhileAnimating:r,updateWhileInteracting:r,zIndex:3}),measure:new Ht.a({source:new _t.a({wrapX:!1}),zIndex:3})},a.layers.fires.on("precompose",(function(e){return e.context.globalCompositeOperation="lighter"})),a.layers.fires.on("postcompose",(function(e){return e.context.globalCompositeOperation="source-over"})),a.mouseWheelZoom=new Et.a,a.scaleLine=new jt.b({minWidth:66}),a.bing=new It(a.layers.bing.getSource()),a.esri=new xt(a.layers.esri.getSource()),a.terminator=new nt(a.layers.live.terminator.getSource()),a.storms=new We(a.layers.stormTracks.getSource(),a.layers.stormCones.getSource(),a.layers.stormDots.getSource()),a.tileCache={},a.attribution="",a.liveUpdateTime=0,a.loadLiveLatest(),setTimeout((function(){a.loadLiveLatest(),setInterval((function(){!document.hidden&&De.isLiveDate&&a.updateStormDates(!0)}),4e4)}),5e3),setInterval((function(){!document.hidden&&a.isLive&&a.loadLiveLatest()}),1e4),a.stormFocusTimeoutID=0,a.object=new Ft.a({view:a.view,target:"map",loadTilesWhileAnimating:!0,loadTilesWhileInteracting:!0,maxTilesLoading:32,overlays:g.touch?[]:[a.storms.overlay],layers:[a.layers.blueMarble,a.layers.daily,a.layers.live.top,a.layers.live.bottom,a.layers.live.metFallback,a.layers.live.met8,a.layers.live.met11,a.layers.live.him8,a.layers.live.him8Wrap,a.layers.live.goes16,a.layers.live.goes17,a.layers.live.goes17Wrap,a.layers.bing,a.layers.bingHybrid,a.layers.esri,a.layers.live.terminator,a.layers.fires,a.layers.stormCones,a.layers.bingLabels,a.layers.labels,a.layers.stormTracks,a.layers.stormDots,a.layers.measure,a.layers.geoDot],controls:Object(Mt.a)({attribution:!1,rotate:!1,zoom:!1}).extend([a.scaleLine]),interactions:Object(Rt.a)({altShiftDragRotate:!1,pinchRotate:!1,doubleClickZoom:!1,shiftDragZoom:!1,mouseWheelZoom:!1,keyboard:!1,zoomDuration:200}).extend([a.mouseWheelZoom])}),a.useBingLabels&&a.object.removeLayer(a.layers.labels),a.measure=new Dt(a.layers.measure),a.updateUnits(),a.updateZoomToCenter(),a.updateLabels(),a.updateLayers(),a.connectEvents(),a}i=e,(t=o).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var a,s,n,r=o.prototype;return r.connectEvents=function(){var e=this,t=this.object.getTargetElement().style,i=(g.touch?16:12)/De.pixelRatio;b(document,"visibilitychange",(function(){!document.hidden&&De.isLiveDate&&(e.loadLiveLatest(),e.updateStormDates(!0))})),this.object.on("pointermove",(function(o){var a=(e.object.getFeaturesAtPixel(o.pixel,{hitTolerance:i})||[])[0],s=a?a.getId()+"":"",n=0===s.indexOf("dot");if(t.cursor=o.dragging?"move":n?"pointer":"",e.updateLocation(o.pixel),"dot-geo"!==s)if(n&&!o.dragging){var r=a.get("id"),l=e.storms.data[r];if(l){var c,u=a.get("index"),h=l.track[u],m=0===s.indexOf("dot-date");if(m)c=l.name.replace(/ \d{4}$/,"");else{var d=De.timeUTC?0:new Date(De.date.getTime()+De.liveTime).getTimezoneOffset()/-60,p=new Date(Date.parse(h.date)+36e5*d);if(isNaN(p.getTime()))return;var g,v=l.isLive&&h.forecast;try{g=new Date(p.getTime()+1e3*p.getTimezoneOffset()*60).toLocaleDateString(De.nonArabicLocale,v?{weekday:"short"}:{month:"short"}).replace(/\./g,"")}catch(e){return}var f=De.time24Hour?G(p):N(p,De.strings.storm.midnight,De.strings.storm.noon,De.strings.clock.am,De.strings.clock.pm,De.locale);c=g+(De.isJaZh&&!v?"":" ")+(v?"":p.getUTCDate()+(De.isJaZh?De.strings.dayJaZh+" ":", "))+f}e.storms.overlay.setOffset([0,m?-22:-17]),e.storms.showOverlay(c,h.rank,a.getGeometry().getCoordinates(),e.mapLon)}}else e.storms.hideOverlay()})),this.object.on("pointerdrag",(function(t){e.updateLocation(t.pixel),e.storms.deselect()})),this.object.on("pointerup",(function(){t.cursor=""})),b(this.object.getTargetElement(),"mouseleave",(function(){e.updateLocation(),e.storms.hideOverlay()})),this.object.on("click",(function(o){var a=(e.object.getFeaturesAtPixel(o.pixel,{hitTolerance:i})||[])[0],s=a?a.getId()+"":"";if(t.cursor="",e.storms.deselect(),e.storms.hideOverlay(),"dot-geo"===s){var n=e.zoom;return e.view.cancelAnimations(),void e.view.animate({duration:200,center:a.getGeometry().getCoordinates(),zoom:n<5?5:n})}if(0===s.indexOf("dot")){var r=a.get("id"),l=e.storms.data[r];if(!l)return;e.storms.selectedID=r;var c=a.get("index");0===s.indexOf("dot-date")?e.panToStorm(a.getGeometry().getCoordinates()):e.panToStormIndex(c),e.dispatchEvent({type:"stormselect",data:l,index:c})}})),this.object.on("dblclick",(function(t){t.preventDefault(),e.measure.isActive||(e.view.cancelAnimations(),e.view.animate({duration:300,zoom:Math.round(e.zoom+1),center:t.coordinate}))}))},r.updateLabels=function(){var e=De.showEsriImages;this.layers.bingLabels.setMinResolution(e||!this.useBingLabels?0:this.monthlyResolution),De.showLabels?(this.layers.labels.setVisible(!0),e?(this.layers.bingLabels.setVisible(!0),this.layers.bingHybrid.setVisible(!1)):(this.layers.bingLabels.setVisible(this.useBingLabels),this.layers.bingHybrid.setVisible(!0)),this.layers.bing.setVisible(!1)):(this.layers.labels.setVisible(!1),this.layers.bingLabels.setVisible(!1),this.layers.bingHybrid.setVisible(!1),this.layers.bing.setVisible(!e)),this.layers.esri.setVisible(e),this.object.maxTilesLoading_=e&&!De.showLabels||De.isSlow?16:32},r.updateLayers=function(){var e=De.showLiveImages,t=De.showDailyImages,i=!e&&!t;this.layers.live.goes17.setVisible(e),this.layers.live.goes17Wrap.setVisible(e),this.layers.live.goes16.setVisible(e),this.layers.live.met11.setVisible(e),this.layers.live.met8.setVisible(e),this.layers.live.him8.setVisible(e),this.layers.live.him8Wrap.setVisible(e),this.layers.blueMarble.setVisible(i),this.layers.daily.setVisible(!i),this.layers.live.metFallback.setVisible(!i),this.layers.live.top.setVisible(!i),this.layers.live.bottom.setVisible(!i),this.updateTerminator()},r.updateTerminator=function(){this.layers.live.terminator.setVisible(De.showTerminator&&this.isLive)},r.updateZoomToCenter=function(){this.mouseWheelZoom.setMouseAnchor(!De.zoomToCenter)},r.wrapDateLine=function(){if(!(this.isMonthlyZoom||De.showLiveImages&&De.date.getTime()>De.minLiveMidnight)){var e=this.center,t=e[0];this.center=me(e),t>ue?this.dispatchEvent({type:"date",calendar:"day",delta:-1}):!this.isLive&&t<-ue&&this.dispatchEvent({type:"date",calendar:"day",delta:1})}},r.updateLocation=function(e){var t;t=!e||De.showCrosshairs||g.touch?this.center:this.object.getCoordinateFromPixel(e);var i=Object(Re.h)(t);i&&L(i[0])&&L(i[1])&&this.dispatchEvent({type:"location",lon:i[0],lat:i[1],zoom:this.zoom})},r.adjustExtent=function(e,t,i){e.setExtent([t[0]+i,t[1],t[2]+i,t[3]])},r.updateSources=function(){var e=De.date.getTime(),t=e-De.minLiveMidnight,i=t/864e5*360,o=Object(Re.d)([Math.min(0,i),0])[0],a=e+De.liveTime;if(t<0&&(a-=t),this.isMonthlyZoom||this.terminator.update(a),a/=1e3,De.showLiveImages){var s=Kt.slice(0);s[0]=Object(Re.d)([Math.min(360,i)+180,0])[0],this.layers.daily.setExtent(s)}else this.layers.daily.setExtent(Kt);this.layers.live.goes17Wrap.setVisible(De.showLiveImages&&i>=360),this.adjustExtent(this.layers.live.goes17,Yt.goes17,o),this.adjustExtent(this.layers.live.goes16,Yt.goes16,o),this.adjustExtent(this.layers.live.met11,Yt.met11,o),this.adjustExtent(this.layers.live.met8,Yt.met8,o),this.adjustExtent(this.layers.live.metFallback,Yt.metAll,o),this.adjustExtent(this.layers.live.him8,Yt.him8,o),this.adjustExtent(this.layers.live.him8Wrap,Yt.him8Wrap,o),this.adjustExtent(this.layers.live.top,Yt.top,o),this.adjustExtent(this.layers.live.bottom,Yt.bottom,o),this.adjustExtent(this.layers.live.terminator,Yt.terminator,o);var n=this.blueMarbleSourceURL;this.setSourceURL(this.layers.blueMarble,n);var r=De.showDailyImages?this.dailySourceURLs:[n];this.dailySourceTime!==e&&(this.dailySourceTime=e,this.dailyCancelSource.cancel(),this.dailyCancelSource=Ue.a.CancelToken.source()),this.setSourceURL(this.layers.daily,r),this.setSourceURL(this.layers.live.metFallback,r),this.setSourceURL(this.layers.live.top,r),this.setSourceURL(this.layers.live.bottom,r),this.layers.fires.setVisible(De.showFireSpots&&De.date.getTime()>=De.firesDate.getTime()),this.layers.fires.getSource().tileCache.clear();var l=this.getLiveSourceURL("goes17",a),c=this.getLiveSourceURL("goes16",a),u=this.getLiveSourceURL("met11",a),h=this.getLiveSourceURL("met8",a),m=this.getLiveSourceURL("him8",a);this.setSourceURL(this.layers.live.goes17,l),this.setSourceURL(this.layers.live.goes17Wrap,l),this.setSourceURL(this.layers.live.goes16,c),this.setSourceURL(this.layers.live.met11,u),this.setSourceURL(this.layers.live.met8,h),this.setSourceURL(this.layers.live.him8,m),this.setSourceURL(this.layers.live.him8Wrap,m),this.setSourceURL(this.layers.labels,this.labelsSourceURL)},r.setSourceURL=function(e,t){if(e&&t){var i=e.getSource(),o=i.getUrls();Array.isArray(t)?o&&o[0]===t[0]||i.setUrls(t):o&&o[0]===t||i.setUrl(t)}},r.getLiveSourceURL=function(e,t){var i=De.liveTimes[e];if(i&&0!==i.length){for(var o,a=1/0,s=i.length;s--;){var n=i[s],r=Math.abs(n-t);r<a&&(a=r,o=n)}var l=new Date(1e3*o);if(!isNaN(l.getTime())){if(De.isLiveDate&&Math.abs(l.getTime()-De.date.getTime()-De.liveTime)>72e5)return De.liveEnabled[e]=!1,De.showDailyImages?this.dailySourceURLs:this.blueMarbleSourceURL;De.liveEnabled[e]=!0;var c=l.toISOString();return Bt+"live/"+e+"/"+c.substr(0,10)+"/"+c.substr(11,2)+c.substr(14,2)+"/{z}/{y}/{x}.jpg"}}},r.getFiresSourceURL=function(e){var t="https://gibs{}.earthdata.nasa.gov/wms/epsg4326/best/wms.cgi?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&LAYERS=MODIS_Combined_Thermal_Anomalies_All,VIIRS_SNPP_Thermal_Anomalies_375m_All&CRS=EPSG:3857&WIDTH=256&HEIGHT=256&TRANSPARENT=true&FORMAT=image/jpeg&TIME="+_(De.date)+"&BBOX="+this.layers.fires.getSource().getTileGrid().getTileCoordExtent(e).join(","),i=[t.replace("{}",""),t.replace("{}","-a"),t.replace("{}","-b"),t.replace("{}","-c")];return i[k(Object(zt.e)(e),i.length)]},r.loadLiveLatest=function(){var e=this;Ue.a.get(Bt+"live/latest.json",{timeout:5e3}).then((function(t){if(t.status<200||t.status>=400)return Promise.reject();if(!t.data||!t.data.goes16)return m("liveLatest","Invalid dates"),Promise.reject();var i=Date.parse(t.headers["last-modified"]);L(i)&&e.liveUpdateTime<i&&(e.liveUpdateTime=i,De.liveTimes=t.data,De.isLiveTimesLoaded=!0,e.dispatchEvent({type:"liveupdate"}))})).catch((function(){var t=new Date,i=t.getUTCHours();t.setUTCHours(i-1,0,0,0);var o=t.getTime()/1e3,a=!1;for(var s in De.liveTimes)0===De.liveTimes[s].length&&(a=!0,De.liveTimes[s]=[o]);a&&(De.isLiveTimesLoaded=!0,e.dispatchEvent({type:"liveupdate"}))}))},r.loadFiresTile=function(e,t){var i=this,o=e.getImage();if(g.blobType){var a=pe(e.getTileCoord(),!0),s=a.x,n=a.y,r=a.z,l=this.getCacheKey("fires",s,n,r,!1),c=this.getCachedTile(l);c?o.src=c:Ue.a.get(t,{cancelToken:this.dailyCancelSource.token,responseType:"blob",timeout:1e4}).then((function(a){if(a.status<200||a.status>=400)return Promise.reject(new Error(a.statusText));if(a.data){var s;try{s=URL.createObjectURL(a.data)}catch(i){return e.setState(Lt.a.ERROR),void(o.src=t)}i.cacheTile(l,s),o.src=s}else e.setState(Lt.a.ERROR),o.src=t})).catch((function(i){Ue.a.isCancel(i)?e.setState(Lt.a.ERROR):o.src=t}))}else o.src=t},r.loadDailyTile=function(e,t,i){var o=this,a=e.getImage(),s=pe(e.getTileCoord(),!1),n=s.x,r=s.y,l=s.z,c=s.size,u=k(n,c);if(i||De.showDailyImages){var h=new Date(De.date.getTime()),m=/\/default\/\d{4}-\d{2}-\d{2}\//;if(n<0)t=t.replace(m,"/default/"+_(j(h))+"/"),_(h)===De.viirsYesterdayDateString&&(t=t.replace("MODIS_Aqua","VIIRS_SNPP"));else if(n>=c){var d=Date.now();h.getTime()>d&&h.setTime(d),t=t.replace(m,"/default/"+_(F(h))+"/"),_(h)===De.viirsDateString&&(t=t.replace("VIIRS_SNPP","MODIS_Aqua"))}if(g.blobType){var p=this.getCacheKey("daily-"+(De.isAM?"am":"pm"),n,r,l,!1),v=this.getCachedTile(p);if(v)a.src=v;else{var f=this.blueMarbleSourceURL.replace("{z}",l).replace("{y}",r).replace("{x}",u);Ue.a.get(t,{cancelToken:this.dailyCancelSource.token,responseType:"blob",timeout:1e4}).then((function(s){if(s.status<200||s.status>=400)return Promise.reject(new Error(s.statusText));if(s.data){var n;try{n=URL.createObjectURL(s.data)}catch(i){return e.setState(Lt.a.ERROR),void(a.src=t)}De.showDailyImages&&o.blackContext&&n?o.checkBlueMarble(e,n,f,i,p):i?o.loadLiveTile(e,n,i,p):(o.cacheTile(p,n),a.src=n)}else e.setState(Lt.a.ERROR),a.src=t})).catch((function(t){Ue.a.isCancel(t)?e.setState(Lt.a.ERROR):a.src=f}))}}else a.src=t}else a.src=t},r.checkBlueMarble=function(e,t,i,o,a){var s=this,n=e.getImage(),r=new Image;r.crossOrigin="anonymous",r.onerror=function(){e.setState(Lt.a.ERROR),n.src=t},r.onload=function(){var l=!1;try{s.blackContext.drawImage(r,0,0,s.blackCanvas.width,s.blackCanvas.height);for(var c=s.blackContext.getImageData(0,0,s.blackCanvas.width,s.blackCanvas.height).data,u=2,h=c.length;u<h;u+=4)if(c[u]<4){l=!0;break}}catch(e){}l?s.compositeBlueMarble(e,t,r,i,o,a):o?s.loadLiveTile(e,t,o,a):(s.cacheTile(a,t),n.src=t)},r.src=t},r.compositeBlueMarble=function(e,t,i,o,a,s){var n=this,r=e.getImage(),l=new Image;l.crossOrigin="anonymous",l.onerror=function(){e.setState(Lt.a.ERROR),r.src=t},l.onload=function(){try{var o=n.blueMarbleContext;o.drawImage(i,0,0);for(var c=o.getImageData(0,0,n.blueMarbleCanvas.width,n.blueMarbleCanvas.height),u=c.data,h=0,m=u.length;h<m;h+=4){var d=u[h]+u[h+1]+u[h+2]<48?255:0;u[h]=d,u[h+1]=d,u[h+2]=d}o.putImageData(c,0,0),o.save(),o.globalCompositeOperation="multiply",o.drawImage(l,0,0),o.restore();var p=n.compositeContext;p.save(),p.drawImage(i,0,0),p.globalCompositeOperation="screen",p.drawImage(n.blueMarbleCanvas,0,0),p.restore()}catch(i){return e.setState(Lt.a.ERROR),void(r.src=t)}n.compositeCanvas.toBlob((function(i){try{var o=URL.createObjectURL(i);URL.revokeObjectURL(t),a?n.loadLiveTile(e,o,a,s):(n.cacheTile(s,o),r.src=o)}catch(i){e.setState(Lt.a.ERROR),r.src=t}}),"image/jpeg",.9)},l.src=o},r.cacheTile=function(e,t){this.tileCache[e]=t},r.getCachedTile=function(e){return this.tileCache[e]},r.getCacheKey=function(e,t,i,o,a){return e+"/"+(De.date.getTime()+(a?De.liveTime:0))+"/"+o+"/"+i+"/"+t},r.loadLiveTile=function(e,t,i,o){var a=this;if(o||De.liveEnabled[i]){var s=e.getImage(),n=e.getTileCoord(),r=pe(n,!0),l=r.x,c=r.y,u=r.z,h=r.size,m=this.getCacheKey(i,l,c,u,!0),d=this.getCachedTile(m);if(d)s.src=d;else{var p=this.getCachedTile(o);if(p)s.src=p;else{var g=4*h,v=Vt[i],f=0,b=1;switch(i){case"goes17":l/h<.015625&&(v=-180,f=1,b=0);break;case"met11":v-=2.8125;break;case"him8":v=Vt.met8-5.625,f=1,b=0}var y=256*((v/360+.5)*h-l);if(y+g<=0||y>=256)s.src=t;else{var w=new Image;w.crossOrigin="anonymous",w.onerror=function(){e.setState(Lt.a.ERROR),s.src=t},w.onload=function(){try{var i=a.liveContext;i.save(),i.drawImage(w,0,0);var o=i.createLinearGradient(y,0,y+g,0);o.addColorStop(f,"rgba(255,255,255,0)"),o.addColorStop(b,"rgba(255,255,255,1)"),i.globalCompositeOperation="destination-out",i.fillStyle=o,i.fillRect(0,0,256,256),i.restore()}catch(i){return e.setState(Lt.a.ERROR),void(s.src=t)}a.liveCanvas.toBlob((function(i){try{var o=URL.createObjectURL(i);0===t.indexOf("blob:")&&URL.revokeObjectURL(t),0===t.indexOf(Bt+"live/")&&a.cacheTile(m,o),s.src=o}catch(i){e.setState(Lt.a.ERROR),s.src=t}}),De.useWebP?"image/webp":"image/png",.8)},w.src=t}}}}else this.loadDailyTile(e,t,i)},r.updateMonthlyDates=function(){var e=this.center,t=Math.ceil(this.zoom-he+(De.use2x?1:0));this.bing.update(e,Math.min(t,De.maxZooms.bing-1)),this.esri.update(e,Math.min(t,De.maxZooms.esri-1),De.showEsriImages&&t<17&&Object(Ut.f)(Xt,e)?2e3:4e3)},r.updateAttribution=function(){this.isLiveAttribution=!1;var e="";if(this.isMonthlyZoom)De.showEsriImages?(e="Esri",this.esri.attribution&&(e+=", "+this.esri.attribution),De.showLabels&&"Microsoft"!==this.esri.attribution&&(e+=", Microsoft")):e="Microsoft";else{var t="";if(t=De.date>=De.viirsDate?De.isAM?"NASA/GSFC/EOSDIS, Terra MODIS":"NASA/NOAA/GSFC/EOSDIS, Suomi-NPP VIIRS":De.isAM?"NASA/GSFC/EOSDIS, Terra MODIS":"NASA/GSFC/EOSDIS, Aqua MODIS",!De.showLiveImages&&!De.showDailyImages||!De.isLiveDate&&!De.showDailyImages)e="NASA/GSFC/EOSDIS, Terra MODIS";else{if(De.isLiveDate&&De.showLiveImages){var i=this.center,o=this.zoom;o<De.minZooms.all+1&&(e="NOAA/NESDIS/STAR, EUMETSAT, JMA/NOAA/CIRA"),!e&&Object(Ut.f)($t.goes17,i)&&(e=o>De.minZooms.monthly||!De.liveEnabled.goes17?t:"NOAA/NESDIS/STAR, GOES-West"),!e&&Object(Ut.f)($t.goes16,i)&&(e=o>De.minZooms.monthly||!De.liveEnabled.goes16?t:"NOAA/NESDIS/STAR, GOES-East"),!e&&Object(Ut.f)($t.met11,i)&&(e=o>De.minZooms.met||!De.liveEnabled.met11?t:"EUMETSAT, Meteosat-11"),!e&&Object(Ut.f)($t.met8,i)&&(e=o>De.minZooms.met||!De.liveEnabled.met8?t:"EUMETSAT, Meteosat-8"),e||!Object(Ut.f)($t.him8,i)&&!Object(Ut.f)($t.him8Wrap,i)||(e=o>De.minZooms.monthly||!De.liveEnabled.him8?t:"JMA/NOAA/CIRA, "+(De.strings.him8||"Himawari-8")),e||(e=t)}else e=t;this.isLiveAttribution=e!==t}if(De.showFireSpots&&(e+=", FIRMS"),De.showStormTracks&&(null!==this.storms.selectedID||null!==this.storms.selectedIndex)){var a=this.storms.selectedData;e+=", "+(a&&a.agencies||"NHC/JTWC")}De.showLabels&&(e+=", "+(this.useBingLabels||this.isMonthlyZoom?"Microsoft":"OpenStreetMap"))}this.attribution="© luhui Zoom Earth, "+e},r.updateUnits=function(){this.scaleLine.setUnits(De.showMetricUnits?jt.a.METRIC:jt.a.IMPERIAL),this.measure.updateUnits()},r.updateSelectedStorm=function(){var e=this,t=this.zoom;if(!(t<De.minZooms.storms||!De.showStormTracks||this.isMonthlyZoom)){this.updateStormDateDots();var i=this.storms.selectedData;if(i)return i;var o=this.storms.getMaxStorm(t,(function(t){return e.object.getPixelFromCoordinate(t)})),a=o.data,s=o.index;return this.dispatchEvent({type:"stormupdate",data:a,index:s}),a}this.dispatchEvent({type:"stormupdate",data:null,index:null})},r.updateStormDateDots=function(){if(De.showStormTracks&&!this.isMonthlyZoom){this.object.renderSync();var e=this.mapLon,t=this.isLive;for(var i in this.storms.dateDots)this.storms.updateDateDot(i,e,t);this.storms.trackSource.changed(),this.storms.coneSource.changed(),this.storms.dotSource.changed()}},r.updateStormDates=function(e){var t=this;this.layers.stormTracks.setVisible(De.showStormTracks),this.layers.stormCones.setVisible(De.showStormTracks),this.layers.stormDots.setVisible(De.showStormTracks),De.showStormTracks&&!this.isMonthlyZoom&&this.storms.loadDates(this.mapExtent,this.isLive,e,(function(i){t.updateStormDateDots(),t.storms.update(i,e,(function(){t.updateStormDateDots(),t.dispatchEvent({type:"permalink"})}))}),(function(){return t.updateStormDateDots()}))},r.moveToStorm=function(e){var t=this.storms.data[e];if(t){this.storms.selectedID=e,this.storms.selectedIndex=void 0!==t.forecast?t.forecast:t.max,this.storms.focussedID=null;var i=t.track.length-1,o=t.track[i];if(o){var a=Date.parse(o.date);!isNaN(a)&&a>Date.now()-324e5&&(this.storms.selectedIndex=i)}this.selectStormDate();var s=this.storms.extent;L(s[0])&&this.view.fit(s,{padding:this.storms.activePadding});var n=this.center[0],r=this.moveToStormDateDot(e);r&&Math.sign(n)!==Math.sign(r[0])&&this.moveToStormDateDot(e);var l=this.zoom;if(l<De.minZooms.storms)this.zoom=De.minZooms.storms;else{var c=(De.isLiveDate&&this.isWithinMet?De.maxZooms.met:De.maxZooms.goes)-(De.isSmallScreen?1:0);l>c&&(this.zoom=c)}this.storms.deselect(),this.updateSources()}},r.moveToStormDateDot=function(e){this.storms.selectedIndex=null;var t=this.storms.updateDateDot(e,this.mapLon,this.isLive);return this.storms.selectedIndex=this.storms.closestIndex,t&&(this.center=t),t},r.panToStorm=function(e){var t=this.storms.selectedData;if(t&&(e||null!==this.storms.selectedIndex)){var i=me(e||Object(Re.d)(t.track[this.storms.selectedIndex].coordinates)),o=this.mapLon,a=this.isLive;(o>=90||o<-90)&&(i[0]>=0&&o<0?(i[0]-=2*ue,a||De.date.setUTCDate(De.date.getUTCDate()-1)):i[0]<0&&o>=0&&(i[0]+=2*ue,a||De.date.setUTCDate(De.date.getUTCDate()+1))),this.view.cancelAnimations(),this.view.animate({duration:200,center:i,zoom:Math.max(this.zoom,De.minZooms.storms)}),clearTimeout(this.stormFocusTimeoutID),this.storms.focussedID=t.id,this.updateSources()}},r.panToStormIndex=function(e){this.storms.selectedIndex=e,this.selectStormDate(),this.panToStorm()},r.panToStormDateDot=function(){var e=this;clearTimeout(this.stormFocusTimeoutID),this.stormFocusTimeoutID=setTimeout((function(){var t=e.storms.dateDots[e.storms.focussedID];t&&e.panToStorm(t.getGeometry().getCoordinates())}),500)},r.selectStormDate=function(){var e=this.storms.selectedData;if(e){var t=e.track[this.storms.selectedIndex];if(t){var i=new Date(t.date);if(!isNaN(i.getTime())){var o=de(t.coordinates[0]),a=i.getTime()>=De.minLiveMidnight,s=a?i:O(t.date,o);if(!isNaN(s.getTime())){var n=new Date,r=a?n:O(n.getTime()-432e5,o);if(s.getTime()>r.getTime()&&s.setTime(r.getTime()),!a){var l=e.track[e.track.length-1];if(l){var c=Date.parse(l.date);!isNaN(c)&&s.getTime()>c&&s.setTime(c)}var u=e.track[0];if(u){var h=Date.parse(u.date);!isNaN(h)&&s.getTime()<h&&s.setTime(h)}}De.isAM=s.getUTCHours()<12||s.getTime()<De.aquaDate.getTime(),this.dispatchEvent({type:"date",calendar:"time",time:s.getTime()})}}}}},r.showGeoDot=function(e,t,i){var o=this;if(void 0!==e&&void 0!==t){var a=Object(Re.d)([e,t]);if(this.geoDot.setGeometry(new He.a(a)),void 0!==i){Object(Me.b)(this.geoRenderID);var s=Object(ut.b)(new Ot.a(a,i),64);this.geoAccuracy.setGeometry(s);var n=.75;return this.geoRenderID=this.object.on("postrender",(function(){(n-=.005)<=0?(o.geoAccuracy.setGeometry(null),Object(Me.b)(o.geoRenderID)):o.geoAccuracy.setStyle(new Oe.c({fill:new Ze.a({color:"rgba(51,204,255,"+Math.min(.25,n)+")"})}))})),this.view.fit(s.getExtent(),{size:this.object.getSize(),padding:[50,50,50,50],maxZoom:De.maxZooms.geolocation}),!0}this.geoAccuracy.setGeometry(null)}return!1},r.zoomBy=function(e){void 0===e&&(e=1),this.storms.deselect(),this.view.cancelAnimations(),this.view.animate({duration:200,zoom:Math.round(this.zoom+e)})},r.panBy=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.storms.deselect();var i=this.object.getPixelFromCoordinate(this.center);i&&(i[0]+=e,i[1]+=t,this.view.cancelAnimations(),this.view.animate({duration:200,center:this.object.getCoordinateFromPixel(i),easing:Zt.d}))},r.moveTo=function(e,t,i,o){var a=L(e)&&L(t);if(o&&4===o.length)this.view.fit(Object(Re.j)(o,"EPSG:4326","EPSG:3857"),{size:this.object.getSize(),maxZoom:De.maxZooms.all});else if(!a)return!1;return a&&(this.center=Object(Re.d)([e,t])),this.zoom=i,!0},r.startMeasure=function(e){this.measure.isActive?this.measure.cancel():(this.measure.start(e),this.object.addOverlay(this.measure.overlay),this.object.addInteraction(this.measure.draw))},r.cancelMeasure=function(){this.object.removeOverlay(this.measure.overlay)},r.endMeasure=function(){this.object.removeInteraction(this.measure.draw)},a=o,(s=[{key:"zoom",get:function(){return this.view.getZoom()},set:function(e){L(e)&&this.view.setZoom(e)}},{key:"isMonthlyZoom",get:function(){return this.zoom>De.minZooms.monthly}},{key:"isLive",get:function(){return De.showLiveImages&&(this.isLiveAttribution&&!this.isMonthlyZoom||!this.isLiveAttribution&&De.isLiveDate&&this.zoom<De.maxZooms.met-1+he)}},{key:"center",get:function(){return this.view.getCenter()},set:function(e){e&&L(e[0])&&L(e[1])&&this.view.setCenter(e)}},{key:"wrappedCenter",get:function(){return me(this.center)}},{key:"coords",get:function(){return Object(Re.h)(this.wrappedCenter)}},{key:"mapLon",get:function(){return this.coords[0]}},{key:"mapExtent",get:function(){return this.view.calculateExtent(this.object.getSize())}},{key:"isWithinMet",get:function(){return Object(Ut.f)($t.metAll,this.center)}},{key:"blueMarbleSourceURL",get:function(){var e=Z[De.date.getUTCMonth()].toLowerCase();return Bt+"bluemarble/"+e+"/{z}/{y}/{x}.jpg"}},{key:"dailySourceURLs",get:function(){var e="https://gibs{}.earthdata.nasa.gov/wmts/epsg3857/all/"+(De.date.getTime()>=De.viirsDate.getTime()?De.isAM?"MODIS_Terra":"VIIRS_SNPP":"MODIS_"+(De.isAM?"Terra":"Aqua"))+"_CorrectedReflectance_TrueColor/default/"+_(De.date)+"/GoogleMapsCompatible_Level9/{z}/{y}/{x}.jpg";return[e.replace("{}",""),e.replace("{}","-a"),e.replace("{}","-b"),e.replace("{}","-c")]}},{key:"labelsSourceURL",get:function(){return Bt+"labels-"+(De.useWebP?"webp":"png")+(De.use2x?"-2x":"")+"/{z}/{y}/{x}."+(De.useWebP?"webp":"png")}}])&&qt(a.prototype,s),n&&qt(a,n),o}(Ee);var ei=/\.| г|de /g,ti=function(e){var t,i;function o(){var t=e.call(this)||this;t.dom=y(document,".panel.controls"),t.clock=y(t.dom,".clock"),t.buttonTimeStamp=0,b(t.clock,"touchend",(function(e){var i=e.timeStamp-t.buttonTimeStamp<=400;(i||e.target.disabled)&&(e.preventDefault(),!e.target.disabled&&e.target.click&&e.target.click()),i||(t.buttonTimeStamp=e.timeStamp)}));var i=y(t.clock,".daily"),o=y(t.clock,".monthly"),a=y(i,".year"),s=y(i,".month"),n=y(i,".day"),r=y(i,".ampm"),l=y(i,".hour"),c=y(i,".minute");t.text={year:y(a,".text"),month:y(s,".text"),day:y(n,".text"),ampm:y(r,".text"),hour:y(l,".text"),minute:y(c,".text"),ampmSmall:y(c,".text-ampm"),bingLong:y(o,".bing .long"),esriLong:y(o,".esri .long"),bingShort:y(o,".bing .short"),esriShort:y(o,".esri .short")},t.button={yearUp:y(a,"button.up"),yearDown:y(a,"button.down"),monthUp:y(s,"button.up"),monthDown:y(s,"button.down"),dayUp:y(n,"button.up"),dayDown:y(n,"button.down"),ampmUp:y(r,"button.up"),ampmDown:y(r,"button.down"),hourUp:y(l,"button.up"),hourDown:y(l,"button.down"),minuteUp:y(c,"button.up"),minuteDown:y(c,"button.down"),recent:y(i,"button.arrow"),bing:y(o,"#layer-bing"),esri:y(o,"#layer-esri")},b(t.button.yearUp,"click",(function(){return t.dispatchDateEvent("year",1)})),b(t.button.yearDown,"click",(function(){return t.dispatchDateEvent("year",-1)})),b(t.button.monthUp,"click",(function(){return t.dispatchDateEvent("month",1)})),b(t.button.monthDown,"click",(function(){return t.dispatchDateEvent("month",-1)})),b(t.button.dayUp,"click",(function(){return t.dispatchDateEvent("day",1)})),b(t.button.dayDown,"click",(function(){return t.dispatchDateEvent("day",-1)})),b(t.button.ampmUp,"click",(function(){return t.dispatchDateEvent("ampm",1)})),b(t.button.ampmDown,"click",(function(){return t.dispatchDateEvent("ampm",-1)})),b(t.button.hourUp,"click",(function(){return t.dispatchDateEvent("hour",1)})),b(t.button.hourDown,"click",(function(){return t.dispatchDateEvent("hour",-1)})),b(t.button.minuteUp,"click",(function(){return t.dispatchDateEvent("minute",1)})),b(t.button.minuteDown,"click",(function(){return t.dispatchDateEvent("minute",-1)})),b(t.button.recent,"click",(function(){return t.dispatchDateEvent("recent")})),b(o,"change",(function(e){var i=e.target.id.split("layer-")[1];i&&t.dispatchEvent({type:"layer",layer:i})}));try{U(y(t.clock,".no-monthly"),M(P(Date.now()).toLocaleDateString(De.nonArabicLocale,{month:"long",year:"numeric"}).replace(ei,"")))}catch(e){}return t}i=e,(t=o).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var a=o.prototype;return a.dispatchDateEvent=function(e,t){this.dispatchEvent({type:"date",calendar:e,delta:t})},a.update=function(e,t){var i=De.date.getUTCFullYear(),o=De.date.getUTCMonth(),a=De.date.getUTCDate(),s=De.liveTime/36e5,n=Math.floor(s),r=Math.round(60*(s-n)),l=e&&!De.timeUTC?1e3*new Date(De.date.getTime()+De.liveTime).getTimezoneOffset()*60:0,c=new Date(Date.UTC(i,o,a,n,r,0,0));c.setTime(c.getTime()-l);var u=new Date(De.minDate.getTime()-l),h=new Date(De.maxLiveDate.getTime()-l),m=c.getUTCFullYear();this.button.yearUp.disabled=m>=h.getUTCFullYear(),this.button.yearDown.disabled=m<=u.getUTCFullYear();var d=c.getUTCMonth();this.button.monthUp.disabled=this.button.yearUp.disabled&&d>=h.getUTCMonth(),this.button.monthDown.disabled=this.button.yearDown.disabled&&d<=u.getUTCMonth();var p=c.getUTCDate();this.button.dayUp.disabled=this.button.monthUp.disabled&&p>=h.getUTCDate(),this.button.dayDown.disabled=this.button.monthDown.disabled&&p<=u.getUTCDate(),this.button.ampmUp.disabled=this.button.dayUp.disabled&&!De.isAM,this.button.ampmDown.disabled=this.button.dayDown.disabled&&De.isAM,this.button.recent.disabled=this.button.ampmUp.disabled;var g=new Date(De.date.getTime()+De.liveTime);g.setUTCHours(g.getUTCHours()+1),this.button.hourUp.disabled=!De.isLiveTimesLoaded||this.button.dayUp.disabled&&g.getTime()>De.maxLiveDate.getTime()&&(De.timeUTC?g.getUTCHours()!==De.maxLiveDate.getUTCHours():g.getHours()!==De.maxLiveDate.getHours()),this.button.hourDown.disabled=!De.isLiveTimesLoaded;var v=new Date(De.date.getTime()+De.liveTime);v.setUTCMinutes(v.getUTCMinutes()+(t?15:10)),this.button.minuteUp.disabled=!De.isLiveTimesLoaded||this.button.hourUp.disabled&&v.getTime()>De.maxLiveDate.getTime(),this.button.minuteDown.disabled=!De.isLiveTimesLoaded,U(this.text.year,m);try{U(this.text.month,new Date(c.getTime()+l).toLocaleDateString(De.nonArabicLocale,{month:"short"}).replace(ei,""))}catch(e){U(this.text.month,Z[d])}if(U(this.text.day,p+(De.isJaZh?De.strings.dayJaZh:"")),De.strings.clock&&U(this.text.ampm,De.isAM?De.strings.clock.am:De.strings.clock.pm),De.isLiveTimesLoaded){var f=c.getUTCHours();U(this.text.ampmSmall,De.time24Hour?"":f<12?De.strings.clock.am:De.strings.clock.pm),De.time24Hour?this.dom.classList.remove("hour12"):(0===(f%=12)&&(f=12),this.dom.classList.add("hour12")),U(this.text.hour,De.time24Hour?C(f):f),U(this.text.minute,C(c.getUTCMinutes()))}},a.updateBing=function(e,t){if(null==e||null==t||e<De.minMonthlyTime||t<De.minMonthlyTime)return U(this.text.bingLong,"Bing"),void U(this.text.bingShort,"Bing");var i,o,a,s,n=De.isJaZh?"–":" – ",r=new Date(e),l=new Date(t);try{r.getMonth()===l.getMonth()?(i="",o="",a=l.toLocaleDateString(De.nonArabicLocale,{month:"long",year:"numeric"})):(i=r.toLocaleDateString(De.nonArabicLocale,{month:"short",year:r.getFullYear()===l.getFullYear()?void 0:"numeric"}),o=n,a=l.toLocaleDateString(De.nonArabicLocale,{month:"short",year:"numeric"}))}catch(e){}a&&U(this.text.bingLong,M(i).replace(ei,"")+o+M(a).replace(ei,""));try{s=l.toLocaleDateString(De.nonArabicLocale,{month:"short",year:"numeric"})}catch(e){}s&&U(this.text.bingShort,M(s).replace(ei,""))},a.updateEsri=function(e){if(null==e||e<De.minMonthlyTime)return U(this.text.esriLong,"Esri"),void U(this.text.esriShort,"Esri");var t,i,o=new Date(e);try{t=o.toLocaleDateString(De.nonArabicLocale,{month:"long",year:"numeric"})}catch(e){}t&&U(this.text.esriLong,M(t).replace(ei,""));try{i=o.toLocaleDateString(De.nonArabicLocale,{month:"short",year:"numeric"})}catch(e){}i&&U(this.text.esriShort,M(i).replace(ei,""))},a.selectMonthly=function(){this.button.bing&&(this.button.bing.checked=!De.showEsriImages),this.button.esri&&(this.button.esri.checked=De.showEsriImages)},o}(Ee),ii=function(){function e(){var e=this;this.seasons={},this.timeoutID=0,this.isLoading=!1,this.dom=y(document,".panel.storm-season"),this.season=0,this.seasonLoading=null,this.seasonText=y(this.dom,"h3"),this.left=y(this.dom,"button.left"),this.right=y(this.dom,"button.right"),b(this.left,"click",(function(){return e.load(e.season-1)})),b(this.right,"click",(function(){return e.load(e.season+1)})),this.content=y(this.dom,"section"),b(this.dom,"touchstart",(function(t){(t.target===e.dom||t.target.disabled)&&t.preventDefault()})),b(y(this.dom,"h2"),"click",(function(t){t.preventDefault(),e.scrollToTop()})),b(y(this.dom,".error-message"),"click",(function(){var t=e.season;e.season=0,e.seasonLoading=null,e.isLoading=!1,e.load(t)})),this.sortMethod="type",b(document.forms.storms,"change",(function(){e.sortMethod=document.forms.storms.sort.value,h("UI","stormSort",e.sortMethod),e.load(e.season,!0)}))}var t=e.prototype;return t.scrollToTop=function(){this.content.scrollTo&&0!==this.content.scrollTop&&this.content.scrollTo(0,0)},t.load=function(e,t){var i=this;if(!this.isLoading){var o=De.minDate.getUTCFullYear(),a=(new Date).getUTCFullYear(),s=I(Math.round(e),o,a);if(this.right.disabled=s===a,this.left.disabled=s===o,t||this.season!==s){this.season=s,h("UI","stormSeason",this.season),this.dom.classList.remove("error");var n=y(this.content,"ul");if(n&&this.content.removeChild(n),this.seasons[this.season])this.show(this.season);else{this.isLoading=!0,this.seasonText.innerHTML=E;var r={season:this.season},l=De.locale.substr(0,2);"en"!==l&&(r.lang=l),Ue.a.get("http://zoom.earth/data/storms/",{timeout:5e3,params:r}).then((function(e){return e.status<200||e.status>=400?Promise.reject(new Error(e.statusText)):e.data.error||!e.data.storms?Promise.reject(new Error(e.data.error||"")):(i.isLoading=!1,i.seasons[i.season]=e.data.storms,void i.show(i.season))})).catch((function(e){i.isLoading=!1,i.dom.classList.add("error"),U(i.seasonText,i.season),m("stormSeason",e.message)}))}}}},t.show=function(e){var t;U(this.seasonText,e);var i=(this.seasons[e]||[]).slice();if(0!==i.length){switch(this.sortMethod){case"alpha":i.sort((function(e,t){return e.id>t.id?1:-1}));break;case"date":i.sort((function(e,t){return e.date>t.date?-1:e.date===t.date?e.id>t.id?1:-1:1}));break;default:case"type":i.sort((function(e,t){return e.rank>t.rank?-1:e.rank===t.rank?e.id>t.id?1:-1:1}))}var o=i.filter((function(e){return e.live}));(t=i=i.filter((function(e){return!e.live}))).unshift.apply(t,o);var a=document.createDocumentFragment(),s=document.createElement("ul");a.appendChild(s);for(var n=0,r=i.length;n<r;n++)this.addStorm(s,e,i[n]);this.scrollToTop(),this.content.appendChild(a)}},t.addStorm=function(e,t,i){var o=document.createElement("li");o.setAttribute("data-loading",1),e.appendChild(o);var a=document.createElement("a");a.href=""+ke.paths.storms+i.id+"/"+ke.query,a.target="_top",o.appendChild(a);var s=document.createElement("div");if(s.className="image",a.appendChild(s),i.image){var n=De.use2x?256:128,r=new Image(128,128);r.alt=i.title+" "+t,"loading"in HTMLImageElement.prototype&&r.setAttribute("loading","lazy"),r.onload=function(){setTimeout((function(){return o.removeAttribute("data-loading")}),30)},r.src="/assets/images/storms/"+n+"/"+t+"/"+i.image,s.appendChild(r)}else s.classList.add("none"),setTimeout((function(){return o.removeAttribute("data-loading")}),30);var l=document.createElement("figcaption"),c=document.createElement("span");c.className="text",c.textContent=i.title,l.appendChild(c),l.appendChild(document.createTextNode(" "));var u=document.createElement("span");u.className="type",i.live?(u.classList.add("live"),u.textContent=De.strings.storm.live,l.appendChild(u)):i.code&&(u.classList.add("rank"+i.rank),u.textContent=i.code,l.appendChild(u)),a.appendChild(l)},e}();var oi={knots:1,kmh:1.852,mph:1.15078},ai=function(e){var t,i;function o(){var t=e.call(this)||this;t.dom=y(document,".panel.storm-info"),t.title=y(t.dom,"h2"),t.content=y(t.dom,"table"),t.timezone=y(t.dom,"thead td.date"),t.wind=y(t.dom,"thead td.wind"),t.tbody=null,t.footerType=y(t.dom,".foot-type"),t.footerTypeText=y(t.footerType,".icon"),t.footerText1=y(t.dom,".foot-text .text1"),t.footerText2=y(t.dom,".foot-text .text2"),t.twitterLink=y(t.dom,".foot-links a"),t.ad=y(document,".panel.ad");var i=y(document,".panel.storm-details");return t.details={dom:i,title:y(i,"h2"),lastMod:y(i,".lastmod"),content:y(i,"section")},t.timezoneOffset=0,t.stormID=null,t.stormHash=null,t.rows=[],t.selectedIndex=null,t.selectedRow=null,t.scrollTimeoutID=0,b(t.title,"click",(function(e){return e.preventDefault()})),b(t.wind,"click",(function(e){e.stopImmediatePropagation();var i=De.stormWindUnits;i="mph"===i?"knots":"knots"===i?"kmh":"mph",De.stormWindUnits=i;var o=t.tbody?t.tbody.scrollTop:0;t.show(t.data,!0),t.select(t.selectedIndex,!1),t.tbody&&(t.tbody.scrollTop=o),h("UI","stormWindUnits",i)})),b(t.content,"click",(function(e){var i=t.rows.indexOf(e.target.parentElement);i>-1&&(t.select(i,!1),t.dispatchEvent({type:"select",index:i}))})),b(y(t.dom,".foot-links .details"),"click",(function(){return t.dispatchEvent({type:"details",id:t.stormID})})),b(t.twitterLink,"click",(function(){return h("UI","stormTwitter",t.stormID)})),t}i=e,(t=o).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var a=o.prototype;return a.scrollToSelectedRow=function(){var e=this;clearTimeout(this.scrollTimeoutID),this.scrollTimeoutID=setTimeout((function(){if(e.selectedRow)if(e.selectedRow.scrollIntoView)try{e.selectedRow.scrollIntoView({behavior:"smooth",block:"center"})}catch(e){}else if(e.selectedRow.scrollIntoViewIfNeeded)try{e.selectedRow.scrollIntoViewIfNeeded(!0)}catch(e){}}),500)},a.select=function(e,t){var i=this.rows[e];if(i&&this.selectedRow!==i){this.selectedRow&&this.selectedRow.classList.remove("selected"),t&&this.scrollToSelectedRow(),this.selectedIndex=e,this.selectedRow=i,i.classList.add("selected"),this.footerType.className="foot-type "+i.classList[0],U(this.footerTypeText,y(i,".icon").textContent),U(this.footerText1,i.title||"");var o,a=i.classList.contains("forecast")?De.strings.storm.forecast+", ":"",s=y(i,".wind").textContent||"?";switch(De.stormWindUnits){case"mph":o="mph";break;case"kmh":o="km/h";break;default:o=/^en/.test(De.locale)?"knot":De.strings.storm.knots}var n=De.strings.storm.winds.replace("%s",s+" "+o);U(this.footerText2,M(a+n))}},a.show=function(e,t){if(e&&(t||this.stormID!==e.id||this.stormHash!=e.hash)){this.data=e,this.stormID=e.id,this.stormHash=e.hash,this.rows=[];var i=e.title.length<26?e.title:e.name;e.isLive?(this.title.innerHTML='<span class="live">'+De.strings.storm.live+"</span> "+i.replace(/ \d{4}$/,""),this.dom.classList.add("live")):(U(this.title,i),this.dom.classList.remove("live")),U(this.details.title,i),this.timezoneOffset=De.timeUTC?0:new Date(De.date.getTime()+De.liveTime).getTimezoneOffset()/-60,U(this.timezone,"UTC"+(0===this.timezoneOffset?"":(this.timezoneOffset<0?"−":"+")+Math.abs(this.timezoneOffset))),this.wind.className="wind "+De.stormWindUnits;var o=this.tbody||y(this.content,"tbody");o&&this.content.removeChild(o);var a=document.createDocumentFragment();this.tbody=document.createElement("tbody"),a.appendChild(this.tbody);for(var s=e.track.length;s--;)this.rows[s]=this.addEntry(this.tbody,e.track[s]);this.twitterLink.href="https://twitter.com/search?q="+encodeURIComponent("FROM:zoom_earth #"+e.id.replace(/\b\S/g,(function(e){return e.toUpperCase()})).replace(/-2$|\d{4}|-/g,"")+" OR @zoom_earth")+"&f=live",this.content.appendChild(a),this.resize(),this.scrollToSelectedRow()}},a.update=function(){var e=this.tbody?this.tbody.scrollTop:0;this.show(this.data,!0),this.select(this.selectedIndex,!1),this.tbody&&(this.tbody.scrollTop=e)},a.addEntry=function(e,t){var i=document.createElement("tr");i.className="rank"+t.rank,t.forecast&&i.classList.add("forecast"),t.description&&(i.title=t.description),e.appendChild(i);var o,a,s=new Date(Date.parse(t.date)+36e5*this.timezoneOffset);try{a=new Date(s.getTime()+1e3*s.getTimezoneOffset()*60).toLocaleDateString(De.nonArabicLocale,{month:"short"}).replace(/\./g,"")}catch(e){a=Z[s.getUTCMonth()]}o=a+(De.isJaZh?"":" ")+s.getUTCDate()+(De.isJaZh?De.strings.dayJaZh+" ":"");var n=document.createElement("td");n.className="date",n.textContent=o,i.appendChild(n);var r=document.createElement("td");r.className="time",r.textContent=De.time24Hour?G(s):N(s,De.strings.storm.midnight,De.strings.storm.noon,De.strings.clock.am,De.strings.clock.pm,De.locale),i.appendChild(r);var l=document.createElement("td");l.className="type";var c=document.createElement("span");c.className="icon",c.textContent=t.code||"-",l.appendChild(c),i.appendChild(l);var u=document.createElement("td");if(u.className="wind",t.wind){var h=oi[De.stormWindUnits]||1;u.textContent=Math.round(t.wind*h)}i.appendChild(u);var m=document.createElement("td");return m.className="pressure",m.textContent=t.pressure||(t.forecast?De.strings.storm.forecast:""),!t.pressure&&t.forecast&&m.classList.add("forecast"),i.appendChild(m),i},a.resize=function(){var e=this.dom.classList.contains("live")?30:0,t=20*Math.max(3,this.rows.length)+122;this.dom.style.maxHeight=L(t)&&t<542?t+e+"px":"",this.scrollToSelectedRow();var i=y(this.details.content,".text");if(i){var o=parseFloat(getComputedStyle(i).height);L(o)&&(this.details.dom.style.maxHeight=o+28+48+"px")}},a.showDetailsLoading=function(){U(this.details.lastMod,""),this.details.content.innerHTML='<div class="text"><p>Loading'+E.replace(/·/g,".")+"</p></div>",this.details.dom.style=""},a.updateLastMod=function(e){if(!e||isNaN(e.getTime()))U(this.details.lastMod,"");else{var t=document.createElement("time");t.dateTime=e.toISOString();var i=e.toISOString().replace("T"," ").substr(0,16)+" UTC";if(/^en/.test(De.locale))try{U(t,G(e)+" "+e.toLocaleDateString(De.nonArabicLocale,{day:"numeric",month:"long",year:"numeric"})+" UTC")}catch(e){U(t,i)}else U(t,i);U(this.details.lastMod,(De.strings.storm.lastMod||"Last Modified:")+" "),this.details.lastMod.appendChild(t)}},a.showDetails=function(e){if(!e||!e.id)return U(this.details.lastMod,""),this.details.content.innerHTML='<div class="text"><p>Unable to load advisory.</p></div>',void(this.details.dom.style="");if(this.updateLastMod(new Date(e.date)),this.details.content.innerHTML='<div class="text">'+e.details+"</div>",e.image){var t=/-(\d{4})$/.exec(e.id)[1],i=document.createElement("div");i.className="image";var o=document.createElement("a");o.href="/assets/images/storms/2048/"+t+"/"+e.image,o.target="_blank",i.appendChild(o);var a=De.use2x?256:128,s=new Image(128,128);s.src="/assets/images/storms/"+a+"/"+t+"/"+e.image,"loading"in HTMLImageElement.prototype&&s.setAttribute("loading","lazy"),s.alt=this.data.title,o.appendChild(s);var n=document.createElement("figcaption");U(n,this.data.name),o.appendChild(n),this.details.content.insertAdjacentElement("afterbegin",i)}this.resize()},o}(Ee);function si(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var ni=function(e){var t,i;function o(){var t=e.call(this)||this;if(De.isMobile=document.body.classList.contains("mobile"),De.isiPad=-1!==navigator.userAgent.indexOf("iPad")||void 0!==navigator.standalone,De.useWebP=document.body.classList.contains("enable-webp"),De.isMobile||De.isiPad?g.touch=!0:De.use2x=De.use2x&&document.body.classList.contains("enable-2x"),t.app=y(document,".app"),!t.app)return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t);g.touch?(b(t.app,"touchstart",(function(){}),!0),b(document,"touchmove",(function(e){!/canvas/i.test(e.target.tagName)&&e.touches.length>1&&e.preventDefault()}),!1)):document.body.classList.add("no-touch"),navigator.standalone&&document.body.classList.add("homescreen"),t.consent=y(document,"#consent"),t.initCookiesConsent(),t.map=y(document,"#map"),t.attribution=y(t.app,".attribution"),b(t.map,"contextmenu",(function(e){return e.preventDefault()})),g.touch&&b(t.map,"touchstart",(function(e){return e.preventDefault()})),t.clock=new ti,t.locate=y(t.app,"button.locate"),b(t.locate,"click",(function(){return t.dispatchEvent({type:"geolocate"})}));var i=y(t.app,".location");if(b(i,"click",(function(){return t.dispatchEvent({type:"location"})})),t.location={lon:y(i,".lon"),lat:y(i,".lat")},b(y(t.app,"button.share"),"click",(function(){return t.dispatchEvent({type:"share"})})),b(y(t.app,"button.settings"),"click",(function(){return t.toggleSettings()})),t.stormSeason=new ii,t.isShowingStormSeason){t.stormSeason.season=R(function(e){if(e){var t=e.firstChild;return t&&!t.nextSibling&&3===t.nodeType?t.data:e.textContent}}(t.stormSeason.seasonText));var o=(new Date).getUTCFullYear();L(t.stormSeason.season)||(t.stormSeason.season=o),t.stormSeason.right.disabled=t.stormSeason.season===o}b(y(t.stormSeason.dom,"button.close"),"click",(function(){return t.hideStormSeason()})),b(y(t.app,"button.storm-season"),"click",(function(){return t.toggleStormSeason()})),t.stormInfo=new ai,b(y(t.stormInfo.dom,"button.close"),"click",(function(){return t.hideStormInfo()})),b(y(t.stormInfo.details.dom,"button.close"),"click",(function(){return t.hideStormDetails()}));for(var a=w(t.app,".notify button.close"),s=a.length;s--;)b(a[s],"click",(function(e){return t.hideNotification(e.target.parentElement)}));for(var n=w(t.app,".notify a"),r=function(e){var i=n[e];b(i,"click",(function(){return t.hideNotification(i.parentElement.parentElement)}))},l=n.length;l--;)r(l);if(De.notifications)for(var c=De.notifications.split(","),u=c.length;u--;){var h=c[u];if(h&&h.length>0)try{var m=y(t.app,".notify .panel."+h);m&&m.parentNode.removeChild(m)}catch(e){}}var d=["labels","live","daily","storms","fires","terminator","crosshairs","zoom","time-utc","time-24"];t.settings={};for(var p=function(e){var i=d[e];try{t.settings[i]=y(document,"#setting-"+i)}catch(e){}b(t.settings[i],"change",(function(){return t.dispatchEvent({type:"setting",setting:i})}))},v=d.length;v--;)p(v);var f=y(t.app,".panel.settings");return b(f,"touchstart",(function(e){e.target===f&&e.preventDefault()})),t.search=y(t.app,".panel.search"),t.searchForm=y(t.search,"form"),t.searchInput=y(t.searchForm,"input[type=text]"),t.searchSubmit=y(t.searchForm,"input[type=submit]"),b(t.search,"submit",(function(e){e.preventDefault(),t.dispatchEvent({type:"search",query:t.searchForm.q.value})})),b(t.search,"animationend",(function(e){"shake"===e.animationName&&t.search.classList.remove("error")})),b(t.searchInput,"focus",(function(){return t.showSearch()})),b(t.searchInput,"blur",(function(){t.searchForm.q.value||t.hideSearch()})),b(y(t.app,"button.search"),"click",(function(){t.showSearch(),t.searchInput.focus()})),t.about=y(document,"button.about"),b(t.about,"click",(function(){return t.toggleAbout()})),b(y(t.app,".panel.about"),"click",(function(e){"P"===e.target.tagName&&e.preventDefault()})),b(y(t.app,"button.zoom.in"),"click",(function(){return t.dispatchEvent({type:"zoom",delta:1})})),b(y(t.app,"button.zoom.out"),"click",(function(){return t.dispatchEvent({type:"zoom",delta:-1})})),b(y(t.app,"button.measure.length"),"click",(function(){return t.dispatchEvent({type:"measure",measure:"length"})})),b(y(t.app,"button.measure.area"),"click",(function(){return t.dispatchEvent({type:"measure",measure:"area"})})),t}i=e,(t=o).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var a,s,n,r=o.prototype;return r.scrollToTop=function(){window.scrollTo&&scrollTo(0,1)},r.initCookiesConsent=function(){var e=this;!this.consent||g.localStorage&&localStorage.getItem("consent")?this.enableCookies():(document.body.classList.remove("cookies-consent"),b(this.consent,"click",(function(){e.enableCookies(),g.localStorage&&localStorage.setItem("consent",!0)})))},r.enableCookies=function(){(window.adsbygoogle||[]).pauseAdRequests=0,window["ga-disable-"+c]=!1,ga("send","pageview"),this.consent&&document.body.classList.add("cookies-consent")},r.checkAdBlock=function(){var e=this;document.body.classList.contains("cookies-consent")?setTimeout((function(){if(w(document,".panel.ad>div ins").length<2||!window.adsbygoogle||!window.adsbygoogle.loaded){document.body.classList.add("adblock");var e=y(document,".panel.ad>div");if(e){var t=document.createElement("a");t.href="https://twitter.com/zoom_earth",t.target="_blank",t.className="link",t.textContent="Follow @zoom_earth",e.appendChild(t)}h("App","adblock",!0)}else h("App","adblock",!1)}),6e3):setTimeout((function(){return e.checkAdBlock()}),6e3)},r.updateAttribution=function(e){U(this.attribution,e)},r.hideGeolocationRequest=function(){var e=this;setTimeout((function(){return e.locate.classList.remove("locating")}),100)},r.showGeolocationRequest=function(){this.locate.classList.add("locating")},r.setChecked=function(e,t){this.settings[e]&&(this.settings[e].checked=t)},r.updateSettings=function(){this.setChecked("labels",De.showLabels),this.setChecked("storms",De.showStormTracks),this.setChecked("fires",De.showFireSpots),this.setChecked("live",De.showLiveImages),this.setChecked("daily",De.showDailyImages),this.updateTerminator(),this.updateCrosshairs(),this.updateTimeUTC(),this.updateTime24Hour(),this.updateZoomToCenter()},r.updateLocation=function(e,t,i){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0);var o=S(e,i),a=S(t,i);if(De.showDecimalLocation){var s=I(i-4,1,6),n="",r="";try{n=o.toLocaleString(De.nonArabicLocale,{minimumFractionDigits:s,maximumFractionDigits:s}),r=a.toLocaleString(De.nonArabicLocale,{minimumFractionDigits:s,maximumFractionDigits:s})}catch(e){try{n=o.toFixed(s),r=a.toFixed(s)}catch(e){}}U(this.location.lon,n.replace("-","−")+"°"),U(this.location.lat,r.replace("-","−")+"°")}else{var l=i>14?100:i>11?10:1,c=A(o,l),u=c.seconds;try{u=u.toLocaleString(De.nonArabicLocale)}catch(e){}var h=-1===c.sign?De.strings.location.west:De.strings.location.east;U(this.location.lon,c.degrees+"° "+c.minutes+"′ "+(i>5?u+"″ ":"")+h);var m=A(a,l),d=m.seconds;try{d=d.toLocaleString(De.nonArabicLocale)}catch(e){}var p=-1===m.sign?De.strings.location.south:De.strings.location.north;U(this.location.lat,m.degrees+"° "+m.minutes+"′ "+(i>5?d+"″ ":"")+p)}},r.hideSettings=function(){this.app.classList.contains("ui-settings")&&(this.app.classList.remove("ui-settings"),h("UI","settings","hide"))},r.showSettings=function(){this.app.classList.contains("ui-settings")||(this.hideStormSeason(),this.app.classList.add("ui-settings"),h("UI","settings","show"))},r.toggleSettings=function(){this.app.classList.contains("ui-settings")?this.hideSettings():this.showSettings()},r.hideSearch=function(){this.app.classList.remove("ui-search")},r.showSearch=function(){this.app.classList.add("ui-search"),this.hideStormSeason()},r.hideStormSeason=function(){this.isShowingStormSeason&&(this.app.classList.remove("ui-storm-season"),h("UI","stormSeason","hide"),this.dispatchEvent({type:"stormseason"}))},r.showStormSeason=function(){if(!this.isShowingStormSeason){this.hideAbout(),this.hideSettings(),this.hideStormInfo(),this.app.classList.add("ui-storm-season"),h("UI","stormSeason","show");var e=De.date.getUTCFullYear(),t=new Date;t.getUTCFullYear()===e&&0===t.getUTCMonth()&&e--,this.stormSeason.load(e),this.dispatchEvent({type:"stormseason"})}},r.toggleStormSeason=function(){this.isShowingStormSeason?this.hideStormSeason():this.showStormSeason()},r.updateStormSeason=function(){this.isShowingStormSeason&&this.stormSeason.load(De.date.getUTCFullYear())},r.hideStormInfo=function(){this.app.classList.contains("ui-storm-info")&&(this.app.classList.remove("ui-storm-info"),h("UI","stormInfo","hide"),this.hideStormDetails(),this.dispatchEvent({type:"stormhide"}))},r.showStormInfo=function(){this.hideStormDetails(),this.app.classList.contains("ui-storm-info")||(this.hideAbout(),this.hideSettings(),this.hideStormSeason(),this.hideClockHelp(),this.stormInfo.update(),this.app.classList.add("ui-storm-info"),h("UI","stormInfo","show"))},r.showStormDetails=function(){this.app.classList.contains("ui-storm-info")&&(this.app.classList.add("ui-storm-details"),h("UI","stormDetails","show"))},r.hideStormDetails=function(){this.app.classList.contains("ui-storm-details")&&(this.app.classList.remove("ui-storm-details"),h("UI","stormDetails","hide"))},r.hideNotification=function(e){if(e&&"panel"===e.classList[0]){e.parentNode.removeChild(e);var t=De.notifications.split(",");t[0]||(t=[]);var i=e.classList[1];-1===t.indexOf(i)&&t.push(i),De.notifications=t.join(",")}},r.hideAbout=function(){this.app.classList.contains("ui-about")&&(this.app.classList.remove("ui-about"),h("UI","about","hide"))},r.showAbout=function(){this.app.classList.contains("ui-about")||(this.hideStormInfo(),this.hideStormSeason(),this.app.classList.add("ui-about"),h("UI","about","show"))},r.toggleAbout=function(){this.app.classList.contains("ui-about")?this.hideAbout():this.showAbout()},r.updateTerminator=function(){this.setChecked("terminator",De.showTerminator)},r.updateCrosshairs=function(){this.setChecked("crosshairs",De.showCrosshairs),De.showCrosshairs?this.app.classList.add("ui-crosshairs"):this.app.classList.remove("ui-crosshairs")},r.updateTimeUTC=function(e){this.setChecked("time-utc",De.timeUTC),e&&this.app.classList.contains("ui-storm-info")&&this.stormInfo.update()},r.updateTime24Hour=function(e){this.setChecked("time-24",De.time24Hour),e&&this.app.classList.contains("ui-storm-info")&&this.stormInfo.update()},r.updateZoomToCenter=function(){this.setChecked("zoom",De.zoomToCenter)},r.hideLive=function(){this.app.classList.remove("ui-live")},r.showLive=function(){this.app.classList.add("ui-live")},r.hideMonthly=function(){this.app.classList.remove("ui-monthly"),this.app.classList.remove("ui-monthly-hidden"),this.hideZoomHelp()},r.showMonthly=function(e){this.app.classList.add("ui-monthly"),Math.ceil(e-he-(De.use2x?0:1))<De.minZooms.monthlyDates?this.app.classList.add("ui-monthly-hidden"):this.app.classList.remove("ui-monthly-hidden")},r.hideClockHelp=function(){this.app.classList.remove("ui-help-clock"),De.showClockHelp=!1},r.showClockHelp=function(e){(e||De.showClockHelp)&&(this.app.classList.add("ui-help-clock"),h("UI","help","clock"))},r.hideZoomHelp=function(){this.app.classList.remove("ui-help-zoom"),De.showZoomHelp=!1},r.showZoomHelp=function(e){0===w(this.app,".notify .panel").length&&(e||De.showZoomHelp)&&(this.app.classList.add("ui-help-zoom"),h("UI","help","zoom"))},r.startMeasure=function(e){h("UI","measure",e+"Start"),this.app.classList.add("ui-measure-"+e)},r.cancelMeasure=function(e){h("UI","measure",e+"Cancel")},r.endMeasure=function(e){h("UI","measure",e+"End"),this.app.classList.remove("ui-measure-"+e)},a=o,(s=[{key:"isShowingStormSeason",get:function(){return this.app.classList.contains("ui-storm-season")}}])&&si(a.prototype,s),n&&si(a,n),o}(Ee);function ri(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var li=function(){function e(){window.location===window.top.location&&/^https:\/\/zoom\.earth\/|192\.168/.test(window.location.href)||(top.location.href="#")}var t,i,o,a=e.prototype;return a.init=function(){var e=this;if(this.ui=new ni,this.ui.app){this.ui.checkAdBlock();var t=window._ZE||{},i=ke.parse();if(De.showLiveImages=i.showLiveImages,De.showDailyImages=i.showDailyImages,void 0!==i.showEsriImages&&(De.showEsriImages=i.showEsriImages),void 0!==i.showLabels&&(De.showLabels=i.showLabels),void 0!==i.showFireSpots&&(De.showFireSpots=i.showFireSpots),void 0!==i.showCrosshairs&&(De.showCrosshairs=i.showCrosshairs),void 0!==i.date&&this.updateDate(i.date,!0),void 0!==i.isAM&&(De.isAM=i.isAM),t.place&&0===i.coords.length){var o=t.place.view;if(o&&(o=o.split(",")).length>=2){var a=parseFloat(o[1]),s=parseFloat(o[0]);L(a)&&L(s)&&(i.coords=[a,s],ke.place.coords=i.coords,ke.place.path=location.pathname);var n=parseFloat(o[2]);L(n)&&(i.zoom=n-(De.isSmallScreen?1:0),ke.place.zoom=i.zoom)}var r=t.place.layers;if(r)for(var l in r=r.split(","))"esri"===r[l]&&(De.showEsriImages=!0)}De.bingAerial=t.bing&&t.bing.aerial||8962,De.bingDynamic=t.bing&&t.bing.dynamic||1108,location.hash&&h("App","permalink",location.hash),h("App","slow",De.isSlow),h("App","bingVersion",De.bingAerial),this.map=new Qt(i.coords,i.zoom),ke.place.coords.length>0&&((new Date).getUTCHours()<13&&i.zoom>De.minZooms.met&&this.map.isWithinMet||(new Date).getUTCHours()<24&&(i.coords[1]>62.9||i.coords[1]<-62.9))&&this.updateDate(F(De.date.getTime()+De.liveTime),!0),b(this.map,"date",(function(t){return e.offsetDate(t)})),i.coords&&i.zoom>De.minZooms.monthly&&!1!==De.showZoomHelp&&(De.showZoomHelp=!0,setTimeout((function(){return e.ui.showZoomHelp()}),5e3),this.zoomHelpTimeoutID=setTimeout((function(){return e.ui.hideZoomHelp()}),45e3)),setTimeout((function(){return e.ui.showClockHelp()}),2e3),setTimeout((function(){return e.ui.hideClockHelp()}),9e4),this.searchCancelSource=Ue.a.CancelToken.source();var c=t.stormData;c&&(this.map.storms.add(c),this.map.moveToStorm(c.id),this.ui.stormInfo.show(c)),b(this.map.object.getTargetElement(),"touchend",(function(){document.activeElement===e.ui.searchInput&&e.ui.searchInput.blur()})),this.map.object.on("movestart",(function(){De.isMobile||document.activeElement!==e.ui.searchInput||e.ui.searchInput.blur()}));var u,d=this.map.zoom;this.map.object.on("moveend",(function(){e.map.wrapDateLine();var t=!1,i=e.map.zoom;if(d!==i){d=i;var o=Math.round(d)-d;null===e.map.storms.selectedID&&Math.abs(o)<=.05&&e.map.zoomBy(o),t=!0}if(!t){var a=e.map.wrappedCenter;u!==a&&(u=a,t=!0)}if(t){var s=ke.place.coords,n=e.map.coords;0!==s.length&&D(n[0],s[0],1e6)&&D(n[1],s[1],1e6)||ke.clearPlace(),e.updateLiveTime(),e.map.isMonthlyZoom&&e.ui.hideStormSeason(),e.map.updateLabels(),e.map.updateLocation(),e.map.updateSources(),e.map.updateStormDates(),e.ui.hideAbout(),e.ui.hideSettings(),e.updateUI()}})),b(this.map,"location",(function(t){return e.ui.updateLocation(t.lon,t.lat,t.zoom)})),b(this.map.scaleLine.element,"click",(function(){return e.toggleMetricUnits()})),this.resizeTimeoutID=0,b(window,"resize",(function(){clearTimeout(e.resizeTimeoutID),e.resizeTimeoutID=setTimeout((function(){return e.resize()}),80)})),this.resize(),setTimeout((function(){return e.resize()}),500),(De.isMobile||De.isiPad)&&setTimeout((function(){return e.resize()}),1500),b(window,"orientationchange",(function(){e.resize(),setTimeout((function(){return e.resize()}),500)})),b(window,"hashchange",(function(){var t=ke.parse();De.showDailyImages=t.showDailyImages,De.showLiveImages=t.showLiveImages,void 0!==t.showEsriImages?De.showEsriImages=t.showEsriImages:De.showEsriImages=!1,void 0!==t.showLabels?De.showLabels=t.showLabels:De.showLabels=!1,void 0!==t.showFireSpots?De.showFireSpots=t.showFireSpots:De.showFireSpots=!1,void 0!==t.showCrosshairs?De.showCrosshairs=t.showCrosshairs:De.showCrosshairs=!1,void 0!==t.date&&e.updateDate(t.date,!0),void 0!==t.isAM&&(De.isAM=t.isAM),e.map.moveTo(t.coords[0],t.coords[1],t.zoom),e.map.updateLayers(),e.map.updateLabels(),e.map.updateSources(),e.map.updateStormDates(),e.updateUI(),e.resize()})),b(window,"keydown",(function(t){if(!(t.defaultPrevented||"q"===t.target.name||t.ctrlKey||t.altKey||t.metaKey)){switch(t.keyCode){case X:case J:case $:e.map.zoomBy(1);break;case Q:case Y:case K:e.map.zoomBy(-1);break;case q:e.map.panBy(-100,0);break;case B:e.map.panBy(100,0);break;case V:e.map.panBy(0,-100);break;case W:e.map.panBy(0,100);break;case ee:e.toggleCrosshairs();break;case te:e.toggleTerminator();break;case ae:e.toggleLabels(),e.ui.updateSettings();break;case re:e.toggleLiveImages(),e.ui.updateSettings();break;case oe:e.toggleDailyImages(),e.ui.updateSettings();break;case se:e.toggleStormTracks(),e.ui.updateSettings();break;case ie:e.toggleFireSpots(),e.ui.updateSettings();break;case ne:e.toggleTime24Hour(),e.ui.updateSettings();break;case ce:e.toggleTimeUTC(),e.ui.updateSettings();break;case le:e.toggleZoomToCenter(),e.ui.updateSettings()}}})),b(this.ui,"setting",(function(t){switch(t.setting){case"labels":e.toggleLabels();break;case"live":e.toggleLiveImages();break;case"daily":e.toggleDailyImages();break;case"storms":e.toggleStormTracks();break;case"fires":e.toggleFireSpots();break;case"terminator":e.toggleTerminator();break;case"crosshairs":e.toggleCrosshairs();break;case"zoom":e.toggleZoomToCenter();break;case"time-utc":e.toggleTimeUTC();break;case"time-24":e.toggleTime24Hour()}})),b(this.ui,"stormseason",(function(){e.map.measure.cancel(),e.updatePermalink()})),b(this.ui,"stormhide",(function(){return e.map.storms.deselect()})),b(this.ui,"search",(function(t){return e.search(t.query)})),b(this.ui,"location",(function(){return e.toggleDecimalLocation()})),b(this.ui,"geolocate",(function(){return e.requestGeolocation()})),b(this.ui,"share",(function(){return e.sharePermalink()})),b(this.ui,"measure",(function(t){e.ui.hideStormInfo(),e.map.startMeasure(t.measure)})),b(this.ui,"zoom",(function(t){return e.map.zoomBy(t.delta)})),b(this.ui.clock,"date",(function(t){e.ui.hideClockHelp(),e.offsetDate(t),e.map.storms.selectedID&&(e.map.storms.selectedIndex=null,e.map.storms.updateDateDot(e.map.storms.selectedID,e.map.mapLon,e.map.isLive),e.ui.stormInfo.select(e.map.storms.closestIndex,!0))})),b(this.ui.clock,"layer",(function(t){De.showEsriImages="esri"===t.layer,e.map.updateLabels(),e.updateAttribution(),e.updatePermalink()})),b(this.map,"stormselect",(function(t){e.ui.stormInfo.show(t.data),e.ui.stormInfo.select(t.index,!0),e.ui.showStormInfo(),h("UI","stormDot",t.data.id)})),b(this.ui.stormInfo,"select",(function(t){var i;e.map.storms.selectedData&&e.map.storms.selectedData.track&&(i=new Date(e.map.storms.selectedData.track[t.index].date)),(isNaN(i)||i.getTime()<De.minLiveDate.getTime())&&(i=De.date),e.map.panToStormIndex(t.index),e.updateDate(i),h("UI","stormInfo",e.map.storms.selectedID)})),b(this.ui.stormInfo,"details",(function(t){e.ui.stormInfo.showDetailsLoading(),e.map.storms.loadDetails(t.id,(function(t){return e.ui.stormInfo.showDetails(t)})),e.ui.showStormDetails()})),b(this.map,"stormupdate",(function(t){e.ui.hideStormDetails(),t.data?(e.ui.stormInfo.show(t.data),e.ui.stormInfo.select(t.index,!0),e.updateAttribution()):e.ui.hideStormInfo()})),b(this.map,"permalink",(function(){return e.updatePermalink()})),b(this.map.bing,"update",(function(t){return e.ui.clock.updateBing(t.min,t.max)})),b(this.map.esri,"update",(function(t){e.ui.clock.updateEsri(t.time),e.updateAttribution()})),b(this.map,"liveupdate",(function(){return e.updateLiveRange()})),b(this.map.measure,"start",(function(t){return e.ui.startMeasure(t.measure)})),b(this.map.measure,"cancel",(function(t){e.map.cancelMeasure(),e.ui.cancelMeasure(t.measure)})),b(this.map.measure,"end",(function(t){e.map.endMeasure(),e.ui.endMeasure(t.measure)})),b(this.map.measure,"units",(function(){return e.toggleMetricUnits()})),this.trackZoomTimeoutID=0,this.zoomHelpTimeoutID=0,this.autoAdvanceTime=0,this.searchCache={},this.map.updateSources(),this.updateLiveTime(),this.updateUI(),this.resize()}else m("app")},a.resize=function(){this.map.object.updateSize(),this.ui.scrollToTop(),this.ui.stormInfo.resize()},a.requestGeolocation=function(){var e=this;h("UI","geolocation","requested"),this.ui.showGeolocationRequest(),this.map.measure.cancel(),navigator.geolocation&&navigator.geolocation.getCurrentPosition?navigator.geolocation.getCurrentPosition((function(t){h("UI","geolocation","located"),e.map.showGeoDot(t.coords.longitude,t.coords.latitude,t.coords.accuracy)||e.map.moveTo(t.coords.longitude,t.coords.latitude,e.geolocationZoom),e.ui.hideGeolocationRequest(),e.ui.hideStormInfo(),e.updateUI(),clearTimeout(e.zoomHelpTimeoutID),e.ui.showZoomHelp(!0),e.zoomHelpTimeoutID=setTimeout((function(){return e.ui.hideZoomHelp()}),15e3)}),(function(t){t&&t.message&&(/denied/i.test(t.message)?h("UI","geolocation","denied"):/timeout/i.test(t.message)&&h("UI","geolocation","timeout")),e.geolocateIP()}),{enableHighAccuracy:!0,timeout:1e4,maximumAge:De.isMobile?0:36e5}):this.geolocateIP()},a.geolocateIP=function(){var e=this;Ue.a.get("http://zoom.earth/data/geocode/",{timeout:5e3}).then((function(t){return t.status<200||t.status>=400?Promise.reject(new Error(t.statusText)):null===t.data.lon||null===t.data.lat?Promise.reject():(e.map.moveTo(t.data.lon,t.data.lat,e.geolocationZoom),e.ui.hideGeolocationRequest(),e.ui.hideStormInfo(),e.updateUI(),clearTimeout(e.zoomHelpTimeoutID),e.ui.showZoomHelp(!0),e.zoomHelpTimeoutID=setTimeout((function(){return e.ui.hideZoomHelp()}),15e3),void h("UI","geolocation","ip"))})).catch((function(){h("UI","geolocation","failed"),e.ui.hideGeolocationRequest()}))},a.toggleLabels=function(){De.showLabels=!De.showLabels,h("UI","labels",De.showLabels?"on":"off"),this.map.updateLabels(),this.updateAttribution(),this.updatePermalink()},a.toggleLiveImages=function(){this.map.isMonthlyZoom||(De.showLiveImages=!De.showLiveImages,h("UI","liveImages",De.showLiveImages?"on":"off"),this.map.updateLayers(),this.map.updateSources(),this.updateAttribution(),this.updateUI())},a.toggleDailyImages=function(){this.map.isMonthlyZoom||(De.showDailyImages=!De.showDailyImages,h("UI","dailyImages",De.showDailyImages?"on":"off"),this.map.updateLayers(),this.map.updateSources(),this.updateAttribution(),this.updateUI())},a.toggleStormTracks=function(){this.map.isMonthlyZoom||(De.showStormTracks=!De.showStormTracks,h("UI","stormTracks",De.showStormTracks?"on":"off"),this.map.updateStormDates(),this.updateAttribution(),De.showStormTracks||this.ui.hideStormInfo(),this.updatePermalink())},a.toggleFireSpots=function(){this.map.isMonthlyZoom||(De.showFireSpots=!De.showFireSpots,h("UI","fireSpots",De.showFireSpots?"on":"off"),this.map.updateSources(),this.updateAttribution(),this.updatePermalink())},a.toggleTerminator=function(){this.map.isMonthlyZoom||(De.showTerminator=!De.showTerminator,h("UI","terminator",De.showTerminator?"on":"off"),this.ui.updateTerminator(),this.map.updateTerminator())},a.toggleCrosshairs=function(){De.showCrosshairs=!De.showCrosshairs,h("UI","crosshairs",De.showCrosshairs?"on":"off"),this.ui.updateCrosshairs(),this.updatePermalink(),this.map.updateLocation()},a.toggleTimeUTC=function(){this.map.isMonthlyZoom||(De.timeUTC=!De.timeUTC,h("UI","timeUTC",De.timeUTC?"on":"off"),this.ui.updateTimeUTC(!0),this.ui.clock.update(this.map.isLive,this.map.isWithinMet),this.map.storms.hideOverlay(),this.updatePermalink())},a.toggleTime24Hour=function(){this.map.isMonthlyZoom||(De.time24Hour=!De.time24Hour,h("UI","time24Hour",De.time24Hour?"on":"off"),this.ui.updateTimeUTC(!0),this.ui.clock.update(this.map.isLive,this.map.isWithinMet),this.map.storms.hideOverlay(),this.updatePermalink())},a.toggleZoomToCenter=function(){De.zoomToCenter=!De.zoomToCenter,h("UI","zoomToCenter",De.zoomToCenter?"on":"off"),this.map.updateZoomToCenter(),this.ui.updateZoomToCenter()},a.toggleDecimalLocation=function(){De.showDecimalLocation=!De.showDecimalLocation,h("UI","decimalLocation",De.showDecimalLocation?"on":"off"),this.map.updateLocation()},a.toggleMetricUnits=function(){De.showMetricUnits=!De.showMetricUnits,h("UI","metricUnits",De.showMetricUnits?"on":"off"),this.map.updateUnits()},a.trackZoom=function(){this.map.isMonthlyZoom?h("Zoom",De.showEsriImages?"esri":"bing",Math.ceil(this.map.zoom-he)):h("Zoom",this.map.isLive?"live":"daily",this.map.isLive?new Date(De.date.getTime()+De.liveTime).toISOString().substr(0,16):_(De.date))},a.updatePermalink=function(){var e=this;if(clearTimeout(this.trackZoomTimeoutID),this.trackZoomTimeoutID=setTimeout((function(){return e.trackZoom()}),1e3),this.ui.isShowingStormSeason)ke.updateStormSeason();else if(!ke.updatePlace()){if(De.showStormTracks){var t=this.map.updateSelectedStorm();if(t)return void ke.updateStormTrack(t)}ke.update(this.map.coords,this.map.zoom,this.map.isLive)}},a.updateAttribution=function(){this.map&&(this.map.updateAttribution(),this.ui.updateAttribution(this.map.attribution))},a.updateUI=function(){this.ui.updateSettings(),this.updateAttribution(),this.map.isMonthlyZoom?(this.ui.clock.selectMonthly(),this.ui.showMonthly(this.map.zoom),this.map.updateMonthlyDates()):(this.ui.clock.update(this.map.isLive,this.map.isWithinMet),this.ui.hideMonthly(),this.map.updateTerminator()),this.map.isLive?this.ui.showLive():this.ui.hideLive(),this.ui.hideSearch(),this.updatePermalink()},a.search=function(e){var t=this;if(this.ui.search.classList.remove("error"),this.map.measure.cancel(),!(e=(e||"").trim())||e.length<2)this.ui.searchInput.select();else{var i=function(e){return h("UI","search",e.toLowerCase())};if(/^(my )?(house|home|location)$/i.test(e))return i(e),void this.requestGeolocation();if(/^(storm|tropical cyclone|cyclone|hurrican|ouragan|typhoon).*/i.test(e)&&!/utah/i.test(e))return i(e),void this.ui.showStormSeason();var o=this.map.storms.data[e+"-"+(new Date).getUTCFullYear()];if(o)return i(e),void(location.pathname=""+ke.paths.storms+o.id+"/");var a=function(e,o){return!!t.map.moveTo(e.lon,e.lat,e.zoom,e.box)&&(ke.place.coords=[e.lon,e.lat],ke.place.zoom=e.zoom,ke.place.path=e.path,ke.place.title=e.title,De.showEsriImages=e.layers&&-1!==e.layers.indexOf("esri"),t.map.updateLabels(),t.ui.hideStormInfo(),t.ui.hideStormSeason(),t.ui.hideSearch(),t.updateUI(),t.updatePermalink(),i(o),!0)},s=e.split(/[,\s*]/).filter(Boolean);if(s.length>=2&&!/°/.test(e)){var n=/([+-]?((\d+\.?\d*)|(\.\d+)))/;if(n.test(s[0])&&n.test(s[1])){var r=parseFloat(s[0]),l=parseFloat(s[1]);if(L(r)&&L(l)&&r>=-90&&r<=90&&l>=-180&&l<=180){r>0&&/.+S$/.test(s[0].trim())&&(r*=-1),l>0&&/.+W$/.test(s[1].trim())&&(l*=-1);var c=parseFloat(s[2]);return void(n.test(s[2])&&L(c)?a({lon:l,lat:r,zoom:c},"{"+r+","+l+","+c+"}"):a({lon:l,lat:r},"{"+r+","+l+"}"))}}}if(/^\d{4}$/i.test(e))return this.ui.search.classList.add("error"),this.ui.searchInput.select(),this.map.isMonthlyZoom||this.ui.showClockHelp(!0),void i(e);var u=this.searchCache[escape(e)];if(u)a(u,e);else{var d=new FormData;d.append("q",e),this.searchCancelSource.cancel(),this.searchCancelSource=Ue.a.CancelToken.source(),Ue.a.post("http://zoom.earth/data/search/",d,{cancelToken:this.searchCancelSource.token,timeout:5e3}).then((function(i){if(i.status<200||i.status>=400)return Promise.reject(new Error(i.statusText));if(!i.data||i.data.error)return Promise.reject(new Error(i.data&&i.data.error||"Search error"));if(i.data.storm)location.pathname=""+ke.paths.storms+i.data.storm+"/";else{if(L(i.data.zoom)&&(i.data.zoom-=De.isSmallScreen?1:0),!a(i.data,e))return Promise.reject(new Error("Invalid search"));t.searchCache[escape(e)]=i.data,t.map.zoom<14?(clearTimeout(t.zoomHelpTimeoutID),t.zoomHelpTimeoutID=setTimeout((function(){return t.ui.hideZoomHelp()}),1e4),t.ui.showZoomHelp(!0)):(clearTimeout(t.zoomHelpTimeoutID),t.ui.hideZoomHelp())}})).catch((function(e){Ue.a.isCancel(e)||(t.ui.search.classList.add("error"),t.ui.searchInput.select(),m("search",e.message))}))}}},a.offsetDate=function(e){var t=new Date(De.date.getTime()+De.liveTime);switch(e.calendar){case"year":t.setUTCFullYear(t.getUTCFullYear()+e.delta);break;case"month":t.setUTCMonth(t.getUTCMonth()+e.delta);break;case"day":t.setUTCDate(t.getUTCDate()+e.delta);break;case"ampm":De.isAM=!De.isAM,(!De.isAM&&e.delta<0||De.isAM&&e.delta>0)&&t.setUTCDate(t.getUTCDate()+e.delta);break;case"hour":t.setUTCHours(t.getUTCHours()+e.delta),De.isLiveDate||(t.setUTCHours(t.getUTCHours()-e.delta),t.setUTCDate(t.getUTCDate()-1),De.isAM=!1);break;case"minute":var i=e.delta*(this.map.isWithinMet?15:10);t.setUTCMinutes(t.getUTCMinutes()+i),De.isLiveDate||(t.setUTCMinutes(t.getUTCMinutes()-i),t.setUTCDate(t.getUTCDate()-1),De.isAM=!1);break;case"recent":De.isAM=!1,t.setTime(Date.now());break;case"time":t.setTime(e.time)}this.updateDate(t,"time"===e.calendar)},a.updateDate=function(e,t){if(void 0===e&&(e=De.date),void 0===t&&(t=!1),!isNaN(e)){var i=e.getTime(),o=De.minDate.getTime();i<o&&(i=o);var a=De.maxLiveDate.getTime();i>a&&(i=a),De.date.setTime(i),H(De.date),De.liveTime=i-De.date.getTime(),this.updateLiveTime(),t?this.updateAttribution():(ke.clearPlace(),this.map.updateSources(),this.map.updateStormDates(),this.map.panToStormDateDot(),this.ui.updateStormSeason(),this.updateUI()),this.autoAdvanceTime=Date.now();var s=De.isLiveDate;h("UI","date",new Date(De.date.getTime()+De.liveTime).toISOString().substr(0,s?16:10)+(s?"":","+(De.isAM?"am":"pm")))}},a.updateLiveRange=function(){var e=Date.now(),t=0;for(var i in De.liveTimes){var o=De.liveTimes[i];o.length>0&&(e=Math.min(e,1e3*o[0]),t=Math.max(t,1e3*o[o.length-1]))}De.minLiveDate.setTime(e),De.minLiveMidnight=P(e).getTime();var a=De.maxLiveDate.getTime(),s=new Date;s.setUTCMinutes(10*Math.floor(s.getUTCMinutes()/10),0,0),t>s.getTime()&&(t=s.getTime()),De.maxLiveDate.setTime(t);var n=De.maxLiveDate.toISOString().substr(0,16);h("UI","liveLatest",n);var r=t-a;if(r>0){var l=De.date.getTime()+De.liveTime,c=Date.now();c-l<54e5&&this.autoAdvanceTime<c-4e3&&(h("UI","liveAdvance",n),this.updateDate(new Date(l+r),!0))}this.updateLiveTime(),this.map.updateSources(),this.updateUI()},a.updateLiveTime=function(){var e=this.map&&this.map.isWithinMet?15:10,t=De.liveTime/36e5,i=Math.floor(t),o=Math.round(Math.floor(60*(t-i))/e)*e;De.liveTime=36e5*(i+o/60);var a=6e4*e,s=Math.floor(De.maxLiveDate.getTime()/a)*a-De.date.getTime();De.liveTime>s&&(De.liveTime=s)},a.sharePermalink=function(){var e=location.href,t=document.title;navigator.share&&De.isMobile?navigator.share({title:t,text:t,url:e}).then((function(){return h("UI","share","navigator")})).catch((function(){})):(!function(e,t,i,o){void 0===i&&(i=600),void 0===o&&(o=340);var a=screenX+(outerWidth-i)/2,s=screenY+(outerHeight-o)/2;window.open(e,"zoomearth-"+t,"resizable=yes,toolbar=no,scrollbars=yes,status=no,width="+i+",height="+o+",left="+a+",top="+s)}("https://neave.com/share/?url="+encodeURIComponent(e)+"&text="+t+"&related=zoom_earth","share"),h("UI","share","social"))},t=e,(i=[{key:"geolocationZoom",get:function(){return I(this.map.zoom,De.minZooms.monthly-1,De.maxZooms.geolocation)}}])&&ri(t.prototype,i),o&&ri(t,o),e}();b(window,"error",(function(e){e.preventDefault();var t=e.error&&e.error.stack||e.message;"Script error."!==t&&m(t,e.filename?"["+e.filename+(e.lineno?":"+e.lineno:"")+(e.colno?":"+e.colno:"")+"]":"")})),(new li).init()}},[[148,2,1]]]);
